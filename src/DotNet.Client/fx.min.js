var fx={};!function(e,t){"use strict";var n=[],i=!1,o=e.Deferred(),a=/<body[^>]*>([\s\S]*)<\/body>/,r=[],s=function(t){if(n[t])return n[t].promise();var i=e.Deferred(),o=document.createElement("script");return o.src=t,o.onload=function(e){i.resolve(e)},o.onerror=function(e){i.reject(e)},document.body.appendChild(o),n[t]=i,i.promise()},l=function(t){if(n[t])return n[t].promise();var i=e.Deferred(),o=document.createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=t,o.onload=function(e){i.resolve(e)},o.onerror=function(e){i.reject(e)},document.head.appendChild(o),n[t]=i,i.promise()},d=function(t){return t=e.isArray(t)?t:t.split(/\s+/),i||(i=o.promise()),e.each(t,function(e,t){i=i.then(function(){return t.indexOf(".css")>=0?l(t):s(t)})}),o.resolve(),i};e.extend(t,{module:".home-main",initUIEventName:"init.fx.ui",beforeInitUIEventName:"before.fx.ui",afterInitUIEventName:"after.fx.ui",destroyModuleEventName:"destroy.fx.module",keyCode:{enter:13,esc:27,end:35,home:36,shift:16,ctrl:17,tab:9,left:37,right:39,up:38,down:40,"delete":46,backspace:8},statusCode:{ok:200,error:300,timeout:301},onReady:function(t,n){var i=this;"function"==typeof t?(n=t,t=null):r=t,e(i.module).on(i.afterInitUIEventName,n)},onModuleDestroy:function(t){e(this.module).on(this.destroyModuleEventName,t)},loadPage:function(n){var i=n.id,o=n.text,a=n.url,s=n.iconCls;a&&(this.setCurrentPanelId(i),e(t.module).trigger(t.destroyModuleEventName),e(t.module).off(t.destroyModuleEventName),e(t.module).off(t.afterInitUIEventName),e(t.module).panel({id:i,title:o,iconCls:s,href:a,onLoadError:function(n){var i=this;try{var o=e.parseJSON(n.responseText);o&&e(i).showDanger(o.message+"  "+n.statusText+"("+n.status+")")}catch(a){t.loadResource(r,function(){e(i).append(n.responseText).initUI()})}},onLoad:function(){var n=this;t.loadResource(r,function(){e(n).initUI()})}}))},setCurrentPanelId:function(t){null===t?e.sessionStorage.remove("currentPanelId"):e.sessionStorage.set("currentPanelId",t)},getCurrentPanelId:function(){return e.sessionStorage.get("currentPanelId")},getScreenResolution:function(){return window.screen.width+"×"+window.screen.height},getOS:function(){var e=new userAgent(navigator.userAgent);return e.os.name+" "+e.os.version.original},getBrowser:function(){var e=new userAgent(navigator.userAgent);return e.browser.name+" "+(e.browser.version.major||e.browser.version.original)},getDevice:function(){var e=new userAgent(navigator.userAgent);return"mobile"==e.device.type.toLowerCase()?e.device.model.toLowerCase():"pc"},serializeForm:function(t){var n={},i=t.serializeArray();return e.each(i,function(){void 0!==n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),t.find("input[type=checkbox]").each(function(){var t=e(this).attr("name"),i=e(this).attr("value");n[t]=i}),n},convertOptionToObj:function(e,t){for(var n=0;n<t.length;n++){var i=t[n],o=e.data(i);void 0!==o&&"string"==typeof o&&e.data(i,o.toObject())}},getOptionToObj:function(e,t){var n=e.data(t);if(void 0!==n&&"string"==typeof n)return n.toObject()},convertOptionToFunc:function(e,t){for(var n=0;n<t.length;n++){var i=t[n],o=e.data(i);void 0!==o&&"string"==typeof o&&e.data(i,o.toFunction())}},getOptionToFunc:function(e,t){var n=e.data(t);if(void 0!==n&&"string"==typeof n)return n.toFunction()},convertOptionToEvent:function(t){var n=t.data();e.each(n,function(e){if(e.indexOf("on")>-1){var n=t.data(e);void 0!==n&&"string"==typeof n&&t.data(e,n.toFunction())}})},loadResource:function(e,t){d(e).then(t)},uuid:function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toLowerCase()}}(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}),getBodyString:function(e){var t=a.exec(e);return t&&2===t.length?t[1]:e},getRandomNumber:function(e){return Math.floor(Math.random()*e+1)},closeChrome:function(){var e=navigator.appName;"Netscape"===e?(window.open("","_self",""),void 0!=window.opener?window.opener.returnValue="1":window.returnValue="1",window.close()):window.close()},fixLenString:function(e,t,n){for(var i=e,o=t-i.length,a=1;a<=o;a++)i=n+i;return i},mask:function(t){t||(t={}),0!=t.masked&&(t.mask||(t.mask="正在提交请求,请稍等..."),t.maskTarget?e(t.maskTarget).mask(t.mask,t.delay):e("body").mask(t.mask,t.delay))},unmask:function(t){t||(t={}),0!=t.masked&&(t.maskTarget?e(t.maskTarget).unmask():e("body").unmask())},ajax:function(n){if(!n.url)return void t.alert("请指定提交Url");var i=e.extend({url:n.url,type:"post",cache:!1,beforeSend:function(){t.mask(i)},complete:function(){t.unmask(i)},error:function(e){t.ajaxFailAlert(e)},success:function(e){"json"==this.dataTypes[1]&&e.message?t.alert(e.message):"html"==this.dataTypes[1]&&alert(e)}},n);n.confirm?t.confirm(n.confirm,function(t){layer.close(t),e.ajax(i)}):e.ajax(i)},window:function(n){n.mask||(n.mask="正在加载,请稍等...");var i=function(e){var t="";"sm"==n.size?t="modal-sm":"lg"==n.size?t="modal-lg":"full"==n.size?t="modal-full":"big"==n.size&&(t="modal-big");var i='<div class="modal fade" aria-hidden="true" role="dialog" data-backdrop="true">   <div class="modal-dialog '+t+'">       <div class="modal-content">';return n.title&&(i+='           <div class="modal-header">               <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>               <h4 class="modal-title"> '+n.title+" </h4>           </div>"),i+='           <div class="modal-body">'+e+'</div>           <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-sign-in"></i> 关闭</button></div>       </div>   </div></div>'},o=function(o){var a=e('<div class="uiwindow-container"></div>');e(o).is(".modal")||(o=i(o)),a.html(o);var r=a.find(".modal");a.appendTo("body"),r.on("hidden.bs.modal",function(){r.triggerHandler("hide"),n.hide&&n.hide.call(r),e().datetimepicker&&r.find(".uidatetime").datetimepicker("remove"),a.remove()}),r.onAfterInitUI(function(){r.triggerHandler("show"),t.unmask(n),n.show&&n.show.call(r)}),r.initUI(),r.modal("show")};if(n.content)o("object"==typeof n.content&&n.content.length>0?n.content.html():n.content);else{if(!n.url){var a="请指定提交Url";return console.error(a),void t.alert(a)}e.ajax({url:n.url,data:n.data,type:n.type||"get",cache:n.cache||!1,dataType:n.dataType||"html",beforeSend:function(){t.mask(n)},complete:function(){},error:function(e){t.unmask(n),t.ajaxFailAlert(e)},success:o})}},serverResult:function(t){var n='<div class="uiwindow-container"><div class="modal fade" aria-hidden="true" role="dialog" data-backdrop="true">   <div class="modal-dialog modal-lg">       <div class="modal-content">           <div class="modal-header">               <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>               <h4 class="modal-title"> 应用程序执行结果 </h4>           </div>           <div class="modal-body"></div>           <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-sign-in"></i> 关闭</button></div>       </div>   </div></div></div>',i=e(n).appendTo("body"),o=i.find(".modal"),a=o.find(".modal-body");o.on("hidden.bs.modal",function(){i.remove()});var r=[],s=[];e.each(t,function(e,t){1==t.success?r.push(t):s.push(t)}),a.append("<h4>共操作 {0} 项，成功 {1} 项，失败 {2} 项</h4>".format(t.length,r.length,s.length)),a.append('<ul class="list-group">'),e.each(r,function(e,t){t.message&&a.append('<li class="list-group-item color-success">'+t.message+"</li>")}),e.each(s,function(e,t){t.message&&a.append('<li class="list-group-item color-danger">'+t.message+"</li>")}),a.append("</ul>"),o.modal("show")},alert:function(t,n,i){var o={title:"系统提示",icon:0},a=e.extend({},o,i);layer.alert(t,a,n)},confirm:function(t,n,i){var o={title:"系统提示",icon:3},a=e.extend({},o,i);layer.confirm(t,a,n)},msg:function(e,t){layer.msg(e,t)},prompt:function(t,n,i){var o={title:t},a=e.extend({},o,i);layer.prompt(a,n)},monitorPanelWidth:function(t,n,i){var o=t+"Status_"+i,a=n.layout("panel",i),r=0;if(e.localStorage.isSet(t)&&(a.panel("resize",{width:e.localStorage.get(t)}),n.layout("resize")),e.localStorage.isSet(o)){var s=e.localStorage.get(o);1==s?setTimeout(function(){n.layout("expand",i)},1):0==s&&setTimeout(function(){n.layout("collapse",i)},1)}n.layout({onCollapse:function(){e.localStorage.set(o,!1)},onExpand:function(){e.localStorage.set(o,!0)}}),a.panel({onResize:function(n,i){r!=n&&(e.localStorage.set(t,n),r=n)}})},ajaxFail:function(e,n){e.responseJSON?n.showDanger(e.responseJSON.message):n.showDanger(t.getBodyString(e.responseText))},ajaxFailAlert:function(n){if(n.responseJSON)t.alert(n.responseJSON.message,null,{title:n.statusText+"("+n.status+")"});else try{var i=e.parseJSON(n.responseText);i&&t.alert(i.message,null,{title:n.statusText+"("+n.status+")"})}catch(o){layer.open({type:1,skin:"layui-layer-rim",area:[e(window).width()/3*2+"px",e(window).height()-100+"px"],title:!1,content:t.getBodyString(n.responseText)})}},maSuccess:function(n){var i=e(this).getFormModal();if(n.success)i.uimodal().close(),n.message&&t.alert(n.message);else{var o=e(this).data("errorEl");if(o){var a=e(e(this).uiform().options.container);a.find(o).html(n.message).show()}else t.alert(n.message)}},mtfSuccess:function(n){var i=e(this).data("table");if(!i)return void t.alert("请指定data-table属性");var o=e(this).getFormModal();if(n.success)o.uimodal().close(),e(i).uitable().reload();else{var a=e(this).data("errorEl");if(a){var r=e(e(this).uiform().options.container);r.find(a).html(n.message).show()}else t.alert(n.message)}},mtftSuccess:function(n){var i=e(this).data("tree");if(!i)return void t.alert("请指定data-tree属性");var o=e(this).getFormModal();if(n.success)o.uimodal().close(),e(i).uitree().reload();else{var a=e(this).data("errorEl");if(a){var r=e(e(this).uiform().options.container);r.find(a).html(n.message).show()}else t.alert(n.message)}},boolColumnFormatter:function(e){var t=e?"checkok":"checkno";return'<div class="'+t+'"><div>'}}),t.loadMask={defaults:{loadMask:!0,loadMaskTarget:null,loadMaskMessage:"正在加载,请稍等...",loadMaskDelay:200},show:function(n){0!=n.loadMask&&(n.loadMaskTarget||(n.loadMaskTarget=t.module),e(n.loadMaskTarget).mask(n.loadMaskMessage,n.loadMaskDelay))},hide:function(t){0!=t.loadMask&&t.loadMaskTarget&&e(t.loadMaskTarget).unmask()}},e.fn.extend({animateCss:function(t,n){var i="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";e(this).addClass("animated "+t).one(i,function(){e(this).removeClass("animated "+t),n&&n.call(this)})},isTag:function(t){return!!t&&(!!e(this).prop("tagName")&&e(this)[0].tagName.toLowerCase()==t.toLowerCase())},isBind:function(t){var n=e(this).data("events");return n&&t&&n[t]},initUI:function(){function n(n){e.when(n.triggerHandler(t.beforeInitUIEventName)).done(function(){n.trigger(t.initUIEventName)})}function i(i){e.when(n(i)).done(function(){i.triggerHandler(t.afterInitUIEventName)})}return this.each(function(){i(e(this))})},getFormModal:function(){return e(this).closest(".uimodal-container")},getModalContent:function(){return e(this).find(".modal-content")},onAfterInitUI:function(n){e(this).on(t.afterInitUIEventName,n)},onSelect2Select:function(t){e(this).on("select2:select",t)},showSuccess:function(t){var n='<div class="alert alert-success alert-dismissible">';n+='<strong><i class="fa-lg fa fa-check-circle"></i> '+t+"</strong>",n+="</div>",e(this).append(n)},showInfo:function(t){var n='<div class="alert alert-info alert-dismissible">';n+='<strong><i class="fa-lg fa fa-info-circle"></i> '+t+"</strong>",n+="</div>",e(this).append(n)},showWarning:function(t){var n='<div class="alert alert-warning alert-dismissible">';n+='<strong><i class="fa-lg fa fa-warning"></i> '+t+"</strong>",n+="</div>",e(this).append(n)},showDanger:function(t){var n='<div class="alert alert-danger alert-dismissible">';n+="<strong>"+t+"</strong>",n+="</div>",e(this).append(n)}})}(jQuery,fx),function(e){"use strict";e(document).on("click.fx.ajax",".tsdelete",function(){var t=e(this);if(!t.data("url"))return fx.msg("请指定data-url属性"),!1;var n,i=t.data("table");n=i?e(i):t.closest(".uitable");var o=e.extend({confirm:"确定要删除当前记录吗?",loadMask:!0,loadMaskDelay:200,loadMaskTarget:n[0],loadMaskMessage:"正在删除数据,请稍等..."},t.data()),a=function(i){if(fx.loadMask.hide(o),i.success){n.uitable().reload();var a=t.data("successCallback");a&&(e.isFunction(a)?a.call(t[0]):a.toFunction().call(t[0]))}else fx.alert(i.message)},r={url:o.url,type:"post",cache:!1,data:t.data("data"),dataType:"json",beforeSend:function(){fx.loadMask.show(o)},error:function(e){fx.loadMask.hide(o),fx.ajaxFailAlert(e)},success:a};return fx.confirm(o.confirm,function(t){layer.close(t),e.ajax(r)}),!1}),e(document).on("click.fx.ajax",".tmdelete",function(){var t=e(this),n=t.data("table");if(!t.data("url"))return fx.msg("请指定data-url属性"),!1;if(!n)return fx.msg("请指定data-table属性"),!1;var i=e(n),o=i.uitable().getSelectedIds();if(0==o.length)return fx.msg("请选择需要删除的记录"),!1;var a=e.extend({loadMask:!0,loadMaskDelay:200,loadMaskTarget:i[0],loadMaskMessage:"正在删除数据,请稍等..."},t.data());t.data("confirm")||(a.confirm='确定要删除选中的 <span class="color-danger"> '+o.length+"</span> 条记录吗?");var r=e.extend({},t.data("data"),{id:o.join()}),s=function(n){if(fx.loadMask.hide(a),n.success){i.uitable().reload();var o=t.data("successCallback");o&&(e.isFunction(o)?o.call(t[0]):o.toFunction().call(t[0]))}else fx.alert(n.message)},l={url:a.url,type:"post",cache:!1,data:r,dataType:"json",beforeSend:function(){fx.loadMask.show(a)},error:function(e){fx.loadMask.hide(a),fx.ajaxFailAlert(e)},success:s};return fx.confirm(a.confirm,function(t){layer.close(t),e.ajax(l)}),!1}),e(document).on("click.fx.ajax",".treedelete",function(){var t=e(this);if(!t.data("url"))return fx.msg("请指定data-url属性"),!1;var n=t.data("tree");if(!n)return fx.msg("请指定data-tree属性"),!1;var i=e(n),o=e.extend({confirm:"确定要删除选中的节点以及子节点吗?",loadMask:!0,loadMaskDelay:200,loadMaskTarget:i[0],loadMaskMessage:"正在删除数据,请稍等..."},t.data()),a=i.uitree().getSelected(),r=e.extend({},t.data("data"),{id:a.id}),s=function(n){if(fx.loadMask.hide(o),n.success){i.uitree().remove(a.target);var r=t.data("table");r&&e(r).uitable().clearRows();var s=t.data("successCallback");s&&(e.isFunction(s)?s.call(t[0]):s.toFunction().call(t[0]))}else fx.alert(n.message)},l={url:o.url,type:"post",cache:!1,data:r,dataType:"json",beforeSend:function(){fx.loadMask.show(o)},error:function(e){fx.loadMask.hide(o),fx.ajaxFailAlert(e)},success:s};return fx.confirm(o.confirm,function(t){layer.close(t),e.ajax(l)}),!1})}(jQuery),$.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(){return new RegExp(/^([-]{0,1}(\d+)[\.]+(\d+))|([-]{0,1}(\d+))$/).test(this)},includeChinese:function(){return new RegExp(/[\u4E00-\u9FA5]/).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(e){return 0===this.indexOf(e)},endsWith:function(e){var t=this.length-e.length;return t>=0&&this.lastIndexOf(e)===t},replaceSuffix:function(e){return this.replace(/\[[0-9]+\]/,"["+e+"]").replace("#index#",e)},replaceSuffix2:function(e){return this.replace(/\-(i)([0-9]+)$/,"-i"+e).replace("#index#",e)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(e,t){return this.replace(new RegExp(e,"gm"),t)},replacePlh:function(e){return e=e||$(document),this.replace(/{\/?[^}]*}/g,function(t){var n=e.find(t.replace(/[{}]+/g,""));return n?n.val():t})},replaceMsg:function(e){return this.replace(new RegExp("({.*})","g"),e)},replaceTm:function(e){return e?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(t){return e[t.replace(/[{}]+/g,"")]}):this},replaceTmById:function(e){var t=e||$(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(e){var n=t.find("#"+e.replace(/[{}]+/g,""));return n.val()?n.val():e})},isFinishedTm:function(){return!new RegExp("{/?[^}]*}").test(this)},skipChar:function(e){return this&&0!==this.length?this.charAt(0)===e?this.substring(1).skipChar(e):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var e=0;e<this.length;e+=1){var t=this.charAt(e);if(" "!=t&&"\n"!=t&&"\t"!=t&&"\r"!=t)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1},toBool:function(){return"true"===this.toLowerCase()},toJson:function(){var e=this;try{return"object"==typeof e&&(e=e.toString()),e.trim().match("^{(.+:.+,*){1,}}$")?JSON.parse(this):this}catch(t){return this}},toObject:function(){var e;try{var t=$.trim(this);t&&("{"!=t.substring(0,1)&&(t="{"+t+"}"),e=new Function("return "+t)())}catch(n){e=null,alert('String toObj：Parse "String" to "Object" error! Your str is: '+this)}return e},toFunction:function(){if(this&&0!=this.length){if(this.startsWith("function"))return new Function("return "+this)();for(var e=this.split("."),t=window,n=0;n<e.length;n++)t=t[e[n]];return"function"==typeof t?t:void 0}},setUrlParam:function(e,t){var n,i=this;if(i.indexOf("?")==-1)return i+"?"+e+"="+t;n=i.substr(i.indexOf("?")+1);var o,a,r="",s="0";if(n.indexOf("&")!=-1){a=n.split("&");for(var l in a)a[l].split("=")[0]==e?(o=t,s="1"):o=a[l].split("=")[1],r=r+a[l].split("=")[0]+"="+o+"&";r=r.substr(0,r.length-1),"0"==s&&r==n&&(r=r+"&"+e+"="+t)}else n.indexOf("=")!=-1?(a=n.split("="),a[0]==e?(o=t,s="1"):o=a[1],r=a[0]+"="+o,"0"==s&&r==n&&(r=r+"&"+e+"="+t)):r=e+"="+t;return i.substr(0,i.indexOf("?"))+"?"+r},format:function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}}),$.extend(Function.prototype,{toFunction:function(){return this}}),$.extend(Date.prototype,{format:function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},formatDate:function(e){return this.format("yyyy-MM-dd")},formatDateTime:function(e){return this.format("yyyy-MM-dd hh:mm:ss")},formatTime:function(e){return this.format("hh:mm:ss")}}),function(e){"use strict";var t=function(){function t(t,n){this.element=t,this.$element=e(t),this.options=n,this.init()}var n=function(t){var n={};t.$element.find("input[type=checkbox]").each(function(){if(e(this).prop("checked")!==!0){var t=e(this).attr("name");n[t]=e(this).prop("checked")}}),e.extend(n,t.options.onData.call(t.element,t.options));var i=e.extend({},t.options,{data:n,error:function(e){fx.loadMask.hide(t.options),fx.ajaxFailAlert(e)},success:function(e){fx.loadMask.hide(t.options),t.$element.triggerHandler("submitsuccess",[e]),t.options.onSubmitSuccess.call(t.element,e,t.options)}});fx.loadMask.show(t.options),t.$element.ajaxSubmit(i)},i=function(t){var i=e(t.options.container),o={messages:{},rules:{},invalidHandler:function(){t.successEl&&i.find(t.successEl).hide(),t.errorEl&&i.find(t.errorEl).show(),1==t.options.modal?t.$element.closest(".modal").animate({scrollTop:0},"slow"):e(fx.module).animate({scrollTop:0},"slow")},submitHandler:function(){t.successEl&&i.find(t.successEl).show(),t.errorEl&&i.find(t.errorEl).hide(),0!=t.options.onBeforeSubmit.call(t.element,t.options)&&n(t)}};t.$element.find("[data-validate]").each(function(){var t=e(this).attr("name"),n=e(this).data("validate"),i=e(this).data("validateMessage");n&&(o.rules[t]=n.toObject()),i&&(o.messages[t]=i.toObject())}),t.$element.validate(o),e().iCheck&&t.$element.find(".uicheck").on("ifToggled",function(n){t.$element.validate().element(e(this))}),e().select2&&t.$element.find(".uiselect").on("change",function(){t.$element.validate().element(e(this))}),e().clockpicker&&t.$element.find(".uiclock").clockpicker().find("input").change(function(){t.$element.validate().element(e(this))}),e().timepicker&&t.$element.find(".uitime").timepicker().on("changeTime.timepicker",function(n){t.$element.validate().element(e(this))}),e().datepicker&&t.$element.find(".uidate").datepicker().on("changeDate",function(n){e(this).datepicker("hide"),t.$element.validate().element(e(this).find(".form-control"))}),e().datetimepicker&&t.$element.find(".uidatetime").datetimepicker().on("changeDate",function(n){t.$element.validate().element(e(this))})};return t.prototype.init=function(){this.options.container||(this.options.container=this.element),this.options.modal&&(this.options.container=this.$element.getFormModal()[0]),this.options.loadMaskTarget||(this.options.modal?this.options.loadMaskTarget=this.$element.closest(".modal-content"):this.options.loadMaskTarget=this.options.container),i(this)},t.prototype.setOptions=function(t){"object"==typeof t&&e.extend(this.options,t)},t.prototype.formSerialize=function(){return $element.formSerialize()},t.prototype.resetForm=function(){$element.resetForm()},t.prototype.clearForm=function(){$element.clearForm()},t}();e.fn.uiform=function(n){return this.each(function(){var i=e(this),o=i.data("uiform");if(o)o.setOptions(n);else{var a=e.extend({},e.fn.uiform.defaults,e.fn.uiform.parseOptions(i),n);o=new t(this,a),i.data("uiform",o)}}),e(this).data("uiform")},e.fn.uiform.parseOptions=function(e){return fx.convertOptionToFunc(e,["onData","onBeforeSubmit","onSubmitSuccess"]),e.data()},e.fn.uiform.defaults=e.extend({},fx.loadMask.defaults,{container:null,loadMaskMessage:"正在提交,请稍等...",modal:!1,errorEl:null,successEl:null,onData:function(e){return{}},onSubmitSuccess:function(e,t){},onBeforeSubmit:function(e){}}),e().validator&&e.validator.setDefaults({errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!1,ignore:":hidden",errorPlacement:function(e,t){t.parent(".input-group").size()>0?e.insertAfter(t.parent(".input-group")):t.attr("data-error-container")?e.appendTo(t.attr("data-error-container")):t.parents(".icheck-list").size()>0?e.appendTo(t.parents(".icheck-list")):t.parents(".icheck-inline").size()>0?e.appendTo(t.parents(".icheck-inline")):t.parents(".radio-list").size()>0?e.appendTo(t.parents(".radio-list")):t.parents(".iradio-inline").size()>0?e.appendTo(t.parents(".iradio-inline")):t.is(".uiselect")?e.appendTo(t.parent()):t.is(".uifileupload")?e.appendTo(t.closest(".file-input")):e.insertAfter(t)},highlight:function(t){e(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){e(t).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()}}),e(document).on(fx.initUIEventName,function(t){e(t.target).find(".uiform").uiform()})}(jQuery),function(e){"use strict";var t=function(){function t(t,n){this.element=t,this.$element=e(t),this.options=n,this.init()}return t.prototype.init=function(){this.options.loadMaskTarget||(this.options.loadMaskTarget=fx.module)},t.prototype.setOptions=function(t){"object"==typeof t&&e.extend(this.options,t)},t.prototype.show=function(){var t=this;if(t.options.data||(t.options.data={}),0==t.options.onBeforeShow.call(t.element,t.options))return void t.$element.remove();var n=e.Event("beforeshow");if(t.$element.triggerHandler(n,[t]),0==n.result)return void t.$element.remove();var i="",o="";1==t.options.animate&&(i="fade "),"sm"==t.options.size?o="modal-sm":"lg"==t.options.size?o="modal-lg":"full"==t.options.size?o="modal-full":"big"==t.options.size&&(o="modal-big"),t.options["class"]&&(i+=t.options["class"]);var a='<div class="modal '+i+'" aria-hidden="true"  role="dialog" data-backdrop="'+t.options.backdrop+'">    <div class="modal-dialog '+o+' ">        <div class="modal-content">        </div>    </div></div>';1==t.options.autoHead&&t.$element.append(a),fx.loadMask.show(t.options);var r=function(n){1==t.options.autoHead?(t.$modal=t.$element.find(".modal"),t.$modal.find(".modal-content").empty().html(n)):(t.$element.empty().html(n),t.$modal=t.$element.find(".modal")),t.$modal.onAfterInitUI(function(){fx.loadMask.hide(t.options),t.options.onAfterShow.call(t.element,t.options),t.$element.triggerHandler(e.Event("aftershow"),[t])}),t.$modal.initUI(),t.$modal.on("hidden.bs.modal",function(){t.options.onBeforeClose.call(t.element,t.options),e().datetimepicker&&t.$element.find(".uidatetime").datetimepicker("remove"),t.$element.remove(),t.options.onAfterClose.call(t.element,t.options)}),t.$modal.modal("show")};e.ajax({url:t.options.url,data:e.extend({},t.options.data,t.options.onData.call(t.element,t.options)),type:"get",cache:!1,dataType:"html"}).done(r).fail(function(e){fx.loadMask.hide(t.options),fx.ajaxFailAlert(e)})},t.prototype.close=function(){this.$modal.modal("hide")},t}();e.fn.uimodal=function(n){return this.each(function(){var i=e(this),o=i.data("uimodal");if(o)o.setOptions(n);else{var a=e.extend({},e.fn.uimodal.defaults,n);o=new t(this,a),i.data("uimodal",o)}}),e(this).data("uimodal")},e.fn.uimodal.parseOptions=function(e){return fx.convertOptionToObj(e,["data"]),fx.convertOptionToFunc(e,["onData","onBeforeShow","onAfterShow","onBeforeClose","onAfterClose"]),e.data()},e.fn.uimodal.defaults=e.extend({},fx.loadMask.defaults,{container:fx.module,autoHead:!0,modalId:null,loadMaskMessage:"正在加载,请稍等...",animate:!0,backdrop:"static",url:null,size:null,onData:function(){return{}},onBeforeShow:function(){},onAfterShow:function(){},onBeforeClose:function(){},onAfterClose:function(){}}),e(document).on("click.fx.modal",".uimodal",function(){var t=e(this),n=t.data("container")||fx.module,i=t.data("modalId"),o="";i&&(o='id="'+i+'"');var a=e("<div "+o+' class="uimodal-container"></div>').appendTo(e(n)).uimodal(e.fn.uimodal.parseOptions(t));return t.data("uimodal",a),a.show(),!1})}(jQuery),function(e){"use strict";var t=function(){function t(t){var i=e.Event("loading");if(t.$element.triggerHandler(i,[this]),i.result!==!1&&0!=t.options.onBeforeLoad.call(t.element,t.options)){var o=e.extend({},{page:t.options.page,order:t.options.order,dir:t.options.dir},t.options.params);e.ajax({url:t.options.url,type:t.options.type,data:o,beforeSend:function(){fx.loadMask.show(t.options)},success:function(e){fx.loadMask.hide(t.options),n(t,e)},error:function(e){fx.loadMask.hide(t.options),t.$element.empty(),fx.ajaxFail(e,t.$element)}})}}function n(n,o){n.$element.empty(),n.$element.append(o),n.$table=n.$element.find("table"),n.$paginate=n.$element.find(".paginate-area"),n.$checkboxs=n.$table.find("tbody .checkbox-check"),n.$element.find('[data-toggle="tooltip"]').tooltip(),n.$checkboxs.on("change",function(){var t=e(this).prop("checked");t?e(this).closest("tr").addClass("warning"):e(this).closest("tr").removeClass("warning")}),n.$table.find("thead .checkbox-check").on("change",function(){var t=e(this).prop("checked");n.$checkboxs.each(function(){t?(e(this).prop("checked",!0),e(this).closest("tr").addClass("warning")):(e(this).prop("checked",!1),e(this).closest("tr").removeClass("warning"))})}),n.$paginate.find("ul>li:not(.active,.disabled)>a").on("click",function(){n.options.page=e(this).data("page"),t(n)}).css("cursor","pointer"),n.$table.find("thead>tr>th[data-order]").each(function(){var t=e(this).data("order");n.options.order===t&&("asc"===n.options.dir?e(this).append(' <i class="fa fa-long-arrow-down" title="升序排序"></i>'):"desc"===n.options.dir&&e(this).append(' <i class="fa fa-long-arrow-up" title="倒序排序"></i>'))}).on("click",function(){n.options.order=e(this).data("order"),n.options.dir&&"asc"===n.options.dir?n.options.dir="desc":n.options.dir="asc",t(n)}).css("cursor","pointer"),i(n),n.$element.triggerHandler("loaded",[this]),n.options.onAfterLoad.call(n.element,n.options)}function i(e){if(1==e.options.alert){var t=e.$table.find("tbody tr").length>0;0==t&&(e.$element.empty(),e.$element.showWarning("没有查询到数据！"))}}function o(t,n){this.options=n,this.element=t,this.$element=e(t),this.$table=null,this.$paginate=null,this.$checkboxs=null,this.init()}return o.prototype.init=function(){this.options.loadMaskTarget||(this.options.loadMaskTarget=this.element),this.options.params||(this.options.params={}),this.initSearchForm(),1==this.options.autoLoad&&(0==this.$element.find("table").length?t(this):n(this,this.$element.html()))},o.prototype.initSearchForm=function(){var t=this;if(t.options.form){var n=e(this.options.form);n.find(":submit:first").on("click",function(){var e=fx.serializeForm(n);return t.search(e),!1})}},o.prototype.setOptions=function(t){"object"==typeof t&&e.extend(this.options,t)},o.prototype.getSelectedIds=function(){var e=[];return this.$checkboxs.each(function(){this.checked&&e.push(this.value)}),e},o.prototype.sort=function(e,n){n||(n="asc"),this.options.order=e,this.options.dir=n,t(this)},o.prototype.search=function(n){this.options.page=1,e.extend(this.options.params,n),t(this)},o.prototype.reload=function(n){e.extend(this.options.params,n),t(this)},o.prototype.clearRows=function(){this.$table.find("tbody").empty(),this.$paginate.empty(),i(this)},o.prototype.getRowCount=function(){return this.$table?this.$table.find("tbody tr").length:0},o}();e.fn.uitable=function(n){return this.each(function(){var i=e(this),o=i.data("uitable");if(o)o.setOptions(n);else{var a=e.extend({},e.fn.uitable.defaults,e.fn.uitable.parseOptions(i),n);o=new t(this,a),i.data("uitable",o)}}),e(this).data("uitable")},e.fn.uitable.parseOptions=function(e){return fx.convertOptionToObj(e,["params"]),fx.convertOptionToFunc(e,["onBeforeLoad","onAfterLoad"]),e.data()},e.fn.uitable.defaults=e.extend({},fx.loadMask.defaults,{container:fx.module,loadMaskMessage:"正在加载数据,请稍等...",autoLoad:!0,alert:!0,type:"post",url:null,page:1,order:null,dir:null,form:".search-table",onBeforeLoad:function(e){},onAfterLoad:function(e){}}),e(document).on(fx.initUIEventName,function(t){e(t.target).find(".uitable").uitable()})}(jQuery),function(e){"use strict";var t=function(){function t(t,n){this.element=t,this.$element=e(t),this.options=n,this.init()}var n=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id==t)return!0;return!1},i=function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];n(e,o.parentid)||t.push(o)}for(var a=[],i=0;i<t.length;i++)a.push(t[i]);for(;a.length;)for(var r=a.shift(),i=0;i<e.length;i++){var o=e[i];if(o.parentid==r.id){var s=o;r.children?r.children.push(s):r.children=[s],a.push(s)}}return t},o=function(t,n,i,o){var a=t.$element,r=(a.tree("getNode",n).id,i.parentid),s=i.id,l=a.tree("find",s),d=a.tree("getParent",l.target),c=d.id;if(r!=c){var u=a.data("parentUrl");if(u){var f={id:s,newParentId:c};e.post(u,f,function(e){e.message&&alert(e.message)})}}var h=a.data("sortUrl");if(h){var p=a.tree("find",c);if(!p)return void alert("更新节点顺序出错,无效的节点Id");var m={},g=p.children||{};e.each(g,function(e,n){m[n.id]=t.getNodeSortPath(n.id)}),e.post(h,m,function(e){e.message&&alert(e.message)})}},a=function(t,n){var i=[];e.map(e.isArray(t)?t:[t],function(t){t=e.trim(t),t&&i.push(t)});for(var o=0;o<i.length;o++){var a=n.text.toLowerCase().indexOf(i[o].toLowerCase())>=0,r=n.spell&&n.spell.toLowerCase().indexOf(i[o].toLowerCase())>=0;if(a||r)return!0}return!i.length},r=function(e){return e?e.children&&e.children.length>0?e.children[0]:void 0:null};return t.prototype.init=function(){this.options.loadMaskTarget||(this.options.loadMaskTarget=this.element);var e=this;this.options.filter=a;var t=this.options.onBeforeLoad;
this.options.onBeforeLoad=function(n,i){fx.loadMask.show(e.options),t&&t.call(this,n,i)};var n=this.options.onLoadSuccess;this.options.onLoadSuccess=function(t,i){fx.loadMask.hide(e.options),n&&n.call(this,t,i)};var r=this.options.onLoadError;this.options.onLoadError=function(t){fx.loadMask.hide(e.options),fx.ajaxFail(t,e.$element),r&&r.call(this,msg)};var s=this.options.loadFilter;this.options.loadFilter=function(t){return s&&s.call(this,t),1==e.options.convert?i(t):t};var l=this.options.onClick;this.options.onClick=function(t){e.options.clickToggle&&e.toggle(t.target),l&&l.call(this,t)};var d=this.options.onDrop;this.options.onDrop=function(t,n,i){d&&d.call(this,t,n,i),o(e,t,n,i)},this.$element.tree(this.options)},t.prototype.setOptions=function(t){"object"==typeof t&&(e.extend(this.options,t),this.init())},t.prototype.getLevelNodeId=function(e){for(var t=1,n=this.getRoot();t<e&&(t++,n=r(n)););return n?n.id:0},t.prototype.getNodeSortPath=function(e){if(!e)return"";var t=this.find(e),n=this.getParent(t.target);if(n){var i="";return"0"!=n.id&&(i=this.getNodeSortPath(n.id)),i+fx.fixLenString(this.getNodeIndex(e,n.children),4,"0")}return fx.fixLenString(this.getNodeIndex(e,this.getRoots()),4,"0")},t.prototype.getNodeIndex=function(t,n){var i=-1;return e.each(n,function(e,n){if(n.id==t)return i=e+1,!1}),i.toString()},t.prototype.expandRoot=function(){var e=this.$element.tree("getRoot");e&&this.$element.tree("expand",e.target)},t.prototype.loadData=function(e){this.$element.tree("loadData",e)},t.prototype.getNode=function(e){return this.$element.tree("getNode",e)},t.prototype.getData=function(e){return this.$element.tree("getData",e)},t.prototype.reload=function(e){this.$element.tree("reload",e)},t.prototype.getRoot=function(e){return this.$element.tree("getRoot",e)},t.prototype.getRoots=function(){return this.$element.tree("getRoots")},t.prototype.getParent=function(e){return this.$element.tree("getParent",e)},t.prototype.getChildren=function(e){return this.$element.tree("getChildren",e)},t.prototype.getChecked=function(e){return this.$element.tree("getChecked",e)},t.prototype.getSelected=function(){return this.$element.tree("getSelected")},t.prototype.isLeaf=function(e){return this.$element.tree("isLeaf",e)},t.prototype.find=function(e){return this.$element.tree("find",e)},t.prototype.select=function(e){this.$element.tree("select",e)},t.prototype.check=function(e){this.$element.tree("check",e)},t.prototype.uncheck=function(e){this.$element.tree("uncheck",e)},t.prototype.collapse=function(e){this.$element.tree("collapse",e)},t.prototype.expand=function(e){this.$element.tree("expand",e)},t.prototype.collapseAll=function(e){this.$element.tree("collapseAll",e)},t.prototype.expandAll=function(e){this.$element.tree("expandAll",e)},t.prototype.expandTo=function(e){this.$element.tree("expandTo",e)},t.prototype.scrollTo=function(e){this.$element.tree("scrollTo",e)},t.prototype.toggle=function(e){this.$element.tree("toggle",e)},t.prototype.append=function(e){this.$element.tree("append",e)},t.prototype.insert=function(e){this.$element.tree("insert",e)},t.prototype.remove=function(e){this.$element.tree("remove",e)},t.prototype.pop=function(e){this.$element.tree("pop",e)},t.prototype.update=function(e){this.$element.tree("update",e)},t.prototype.enableDnd=function(){this.$element.tree("enableDnd")},t.prototype.disableDnd=function(){this.$element.tree("disableDnd")},t.prototype.beginEdit=function(e){this.$element.tree("beginEdit",e)},t.prototype.endEdit=function(e){this.$element.tree("endEdit",e)},t.prototype.cancelEdit=function(e){this.$element.tree("cancelEdit",e)},t.prototype.doFilter=function(e){this.$element.tree("doFilter",e)},t.prototype.filter=function(e){this.$element.tree("doFilter",e)},t}();e.fn.uitree=function(n){return this.each(function(){var i=e(this),o=i.data("uitree");if(o)o.setOptions(n);else{var a=e.extend({},e.fn.uitree.defaults,e.fn.uitree.parseOptions(i),n);o=new t(this,a),i.data("uitree",o)}}),e(this).data("uitree")},e.fn.uitree.parseOptions=function(e){return fx.convertOptionToEvent(e),e.data()},e.fn.uitree.defaults=e.extend({},fx.loadMask.defaults,{container:fx.module,convert:!0,clickToggle:!0,loadMaskMessage:"正在加载数据,请稍等..."}),e(document).on(fx.initUIEventName,function(t){e(t.target).find(".uitree").uitree()})}(jQuery),function(e){"use strict";var t=function(){function t(t,n){this.element=t,this.$element=e(t),this.options=n,this.$treegridEl=this.$element.find(".treegrid"),this.$toolbarEl=this.$element.find(".treegridtoolbar"),this.$tcreaterootEl=this.$toolbarEl.find(".tcreateroot"),this.$tcreateEl=this.$toolbarEl.find(".tcreate"),this.$teditEl=this.$toolbarEl.find(".tedit"),this.$tdeleteEl=this.$toolbarEl.find(".tdelete"),this.$trefreshEl=this.$toolbarEl.find(".trefresh"),this.$menuEl=this.$element.find(".ttmenu"),this.$menuCreateEl=this.$element.find(".ttmcreate"),this.$menuEditEl=this.$element.find(".ttmedit"),this.$menuDeleteEl=this.$element.find(".ttmdelete"),this.$menuRefreshEl=this.$element.find(".ttmrefresh"),this.$tfilterEl=this.$element.find(".tfilter"),this.initToolbar(),this.initTreeGrid(),this.initMenu()}var n,i=function(e,t){for(var n=0;n<e.length;n++)if(e[n]._parentId==t)return!0;return!1},o=function(e){var t=e.$treegridEl.treegrid("getSelected");return t?t:(fx.msg("请先选择节点"),null)};return t.prototype.initTreeGrid=function(){var t=this;t.$treegridEl.treegrid({url:t.$treegridEl.data("url"),fit:!0,border:!1,striped:!0,rownumbers:!0,loadMsg:"正在加载数据...",animate:!0,fitColumns:!0,collapsible:!0,method:"get",toolbar:t.$toolbarEl[0],idField:"Id",treeField:"Name",loadFilter:function(t){return e.each(t.rows,function(e,n){n._parentId&&"0"==n._parentId&&(n._parentId=null),n.IsExpand&&1==n.IsExpand?n.state="open":i(t.rows,n.Id)&&(n.state="closed"),n.iconCls&&(n.iconCls="font-icon-treegrid "+n.iconCls)}),t},onSelect:function(e){t.lastSelectedId=e.Id},onContextMenu:function(n,i){n.preventDefault(),i&&(e(this).treegrid("expand",i.Id),e(this).treegrid("select",i.Id),t.$menuEl.menu("show",{left:n.pageX,top:n.pageY}))},onDblClickRow:function(t){var n=e(this).data("detailsUrl"),i={id:t.Id};fx.window({url:n,data:i})},onDragOver:function(e,t){return t._parentId!=e.Id},onBeforeDrop:function(e,t){n=t._parentId},onDrop:function(i,o,a){var r,s=e(this).data("parentUrl"),l=e(this).data("sortUrl"),d=o.Id;r="append"==a?i.Id:i._parentId,r&&""!=r||(r="0"),e.post(s,{id:d,oldParentId:n,newParentId:r},function(e){e.success||fx.alert(e.message)});var c=[];c.push(r);var u={};e.each(c,function(n,i){var o=t.$treegridEl.treegrid("find",i);if(null==o){var a=t.$treegridEl.treegrid("getRoots");e.each(a,function(e,t){u[t.Id]=fx.fixLenString(e.toString(),4,"0")})}else o.children&&e.each(o.children,function(e,n){u[n.Id]=t.getNodeSortPath(n.Id)})}),e.post(l,u,function(e){e.success||fx.alert(e.message)})},onLoadSuccess:function(){var n=e(this),i=n.treegrid("find",t.lastSelectedId);i&&(n.treegrid("expandTo",i.Id),n.treegrid("select",i.Id)),e(this).treegrid("enableDnd",null)}})},t.prototype.getNodeSortPath=function(e){if(!e)return"";var t=this.$treegridEl.treegrid("getParent",e);if(null!=t){var n=this.getNodeSortPath(t.Id);return n+fx.fixLenString(this.getNodeIndex(e,t.children),4,"0")}return fx.fixLenString(this.getNodeIndex(e,this.$treegridEl.treegrid("getRoots")),4,"0")},t.prototype.getNodeIndex=function(t,n){var i=-1;return e.each(n,function(e,n){if(n.Id==t)return i=e,!1}),i.toString()},t.prototype.initMenu=function(){var t=this;t.$menuEl.length>0&&(t.$menuEl.menu({onShow:function(){var n=o(t);"0"==n.id?(t.$menuEditEl.length>0&&e(this).menu("disableItem",t.$menuEditEl[0]),t.$menuDeleteEl.length>0&&e(this).menu("disableItem",t.$menuDeleteEl[0])):(t.$menuEditEl.length>0&&e(this).menu("enableItem",t.$menuEditEl[0]),t.$menuDeleteEl.length>0&&e(this).menu("enableItem",t.$menuDeleteEl[0]))}}),fx.onModuleDestroy(function(){t.$menuEl.menu("destroy")})),t.$menuCreateEl.length>0&&t.$menuCreateEl.click(function(){var n=e(this).data("url");t.create(n)}),t.$menuEditEl.length>0&&t.$menuEditEl.click(function(){var n=e(this).data("url");t.edit(n)}),t.$menuDeleteEl.length>0&&t.$menuDeleteEl.click(function(){var n=e(this).data("url");t["delete"](n)}),t.$menuRefreshEl.length>0&&t.$menuRefreshEl.click(function(){t.refresh()})},t.prototype.initToolbar=function(){var t=this;t.$tcreaterootEl.length>0&&t.$tcreaterootEl.click(function(){var n=e(this).data("url");t.createRoot(n)}),t.$tcreateEl.length>0&&t.$tcreateEl.click(function(){var n=e(this).data("url");t.create(n)}),t.$teditEl.length>0&&t.$teditEl.click(function(){var n=e(this).data("url");t.edit(n)}),t.$tdeleteEl.length>0&&t.$tdeleteEl.click(function(){var n=e(this).data("url");t["delete"](n)}),t.$trefreshEl.length>0&&t.$trefreshEl.click(function(){t.refresh()})},t.prototype.createRoot=function(e){fx.window({url:e,data:{parentid:0}})},t.prototype.create=function(e){var t=this,n=o(t);n&&fx.window({url:e,data:{parentid:n.Id}})},t.prototype.edit=function(e){var t=this,n=o(t);n&&fx.window({url:e,data:{id:n.Id}})},t.prototype["delete"]=function(e){var t=this,n=o(t);n&&fx.ajax({url:e,data:{id:n.Id},confirm:"确定要删除选中的节点以及子节点吗?",success:function(e){e.success?t.refresh():fx.alert(e.message)}})},t.prototype.refresh=function(){this.$treegridEl.treegrid("reload")},t.prototype.setOptions=function(t){"object"==typeof t&&e.extend(this.options,t)},t}();e.fn.uitreegrid=function(n){return this.each(function(){var i=e(this),o=i.data("uitreegrid");o?o.setOptions(n):(o=new t(this,{}),i.data("uitreegrid",o))}),e(this).data("uitreegrid")},e(document).on(fx.initUIEventName,function(t){e(t.target).find(".uitreegrid").uitreegrid()})}(jQuery),function(e){"use strict";var t=function(){function t(t,n){var i=this;this.element=t,this.$element=e(t),this.options=n,this.$treeEl=this.$element.find(".tttree"),this.$tableEl=this.$element.find(".tttable"),this.$tableCreateEl=this.$element.find(".tttcreate"),this.$menuEl=this.$element.find(".ttmenu"),this.$menuCreateEl=this.$element.find(".ttmcreate"),this.$menuEditEl=this.$element.find(".ttmedit"),this.$menuDeleteEl=this.$element.find(".ttmdelete"),this.$menuRefreshEl=this.$element.find(".ttmrefresh"),this.$tttree_filterEl=this.$element.find(".tttree_filter"),this.$tttree_filterEl.keypress(function(t){13==t.keyCode&&i.$treeEl.tree("doFilter",e(this).val().trim())}),this.initMenu(),this.initTable(),this.initTree();var o=i.$element.data("westWidthName");o&&fx.monitorPanelWidth(o,i.$element,"west")}var n=function(e){var t=e.$treeEl.uitree(),n=t.getSelected();return n?n:(fx.alert(e.$treeEl.data("selectedMessage")||"请先选择树节点"),null)},i=function(e){var t=n(e);e.lastLoadId!=t.id&&e.$tableEl.uitable().search()},o=function(t,n,i){var o=function(o){var a=e(this);if(o.success){n.uimodal().close();var r=t.$treeEl.uitree();1==i?(r.append({parent:r.getSelected().target,data:{id:o.data.id,parentid:o.data.parentId,iconCls:o.data.iconCls,text:o.data.text}}),1==t.$menuCreateEl.data("refreshTable")&&t.$tableEl.uitable().reload()):(r.update({target:r.getSelected().target,iconCls:o.data.iconCls,text:o.data.text}),1==t.$menuEditEl.data("refreshTable")&&t.$tableEl.uitable().reload())}else{var s=a.data("errorEl");if(s){var l=e(e(this).uiform().options.container);l.find(s).html(o.message).show()}else fx.alert(o.message)}};n.find("form").uiform({onSubmitSuccess:o})};return t.prototype.initTree=function(){var t=this;0!=t.$treeEl.length&&t.$treeEl.uitree({onLoadSuccess:function(){var n=e(this).uitree(),i=n.find(t.lastSelectedId);if(!i){var o=t.$treeEl.data("expandLevel")||1,a=n.getLevelNodeId(o);i=n.find(a)}n.expandTo(i.target),n.expand(i.target),n.select(i.target),n.scrollTo(i.target)},onSelect:function(e){t.lastSelectedId=e.id,i(t)},onContextMenu:function(n,i){n.preventDefault(),e(this).tree("expand",i.target),e(this).tree("select",i.target),t.$menuEl.menu("show",{left:n.pageX,top:n.pageY})},onClick:function(t){e(this).tree("expand",t.target)}})},t.prototype.initMenu=function(){var t=this;t.$menuEl.length>0&&(t.$menuEl.menu({onShow:function(){var n=t.$treeEl.uitree(),i=n.getSelected();"0"==i.id?(t.$menuEditEl.length>0&&e(this).menu("disableItem",t.$menuEditEl[0]),t.$menuDeleteEl.length>0&&e(this).menu("disableItem",t.$menuDeleteEl[0])):(t.$menuEditEl.length>0&&e(this).menu("enableItem",t.$menuEditEl[0]),t.$menuDeleteEl.length>0&&e(this).menu("enableItem",t.$menuDeleteEl[0]))}}),fx.onModuleDestroy(function(){t.$menuEl.menu("destroy")})),t.$menuCreateEl.length>0&&(t.$menuCreateEl.data("onBeforeShow",function(e){e.data.parentid=t.$treeEl.uitree().getSelected().id}),t.$menuCreateEl.data("onAfterShow",function(){o(t,e(this),!0)})),t.$menuEditEl.length>0&&(t.$menuEditEl.data("onBeforeShow",function(e){e.data.id=t.$treeEl.uitree().getSelected().id}),t.$menuEditEl.data("onAfterShow",function(){o(t,e(this),!1)})),t.$menuRefreshEl.length>0&&t.$menuRefreshEl.click(function(){t.$treeEl.uitree().reload()})},t.prototype.initTable=function(){var t=this;t.$tableEl.length>0&&t.$tableEl.uitable({onBeforeLoad:function(e){var i=n(t);return!!i&&(e.params.parentid=i.id,void(t.lastLoadId=i.id))},onAfterLoad:function(){t.$element.find(".tsdelete").each(function(){1==e(this).data("refreshTree")&&e(this).data("successCallback",function(){t.$treeEl.uitree().reload()})})}}),t.$tableCreateEl.length>0&&t.$tableCreateEl.data("onBeforeShow",function(e){var i=n(t);return!!i&&void(e.data.parentid=i.id)})},t.prototype.setOptions=function(t){"object"==typeof t&&e.extend(this.options,t)},t}();e.fn.uitreetable=function(n){return this.each(function(){var i=e(this),o=i.data("uitreetable");o?o.setOptions(n):(o=new t(this,{}),i.data("uitreetable",o))}),e(this).data("uitreetable")},e(document).on(fx.initUIEventName,function(t){e(t.target).find(".uitreetable").uitreetable()})}(jQuery),function(e){"use strict";function t(t,n){var i=e(t).find("option:checked");e(t).siblings("[name="+n+"]").val(i.text())}function n(n){if(e().select2&&e.fn.select2.amd.require(["select2/compat/matcher"],function(i){n.find(".uiselect").select2({width:"auto",allowClear:!1,placeholder:"",language:"zh-CN",theme:"bootstrap",matcher:i(function(t,n,i){var o=e(i.element).data("spell");return!!(n.toUpperCase().indexOf(t.toUpperCase())>-1||o&&o.toUpperCase().indexOf(t.toUpperCase())>-1)})}).each(function(){var n=this;e(n).on("select2:open",function(t){var n=e(t.target).next().width();e(t.target).next().width(n),e(".select2-container--open > .select2-dropdown").width(n)});var i=e(n).data("hasTextField");if(i!==!1){var o=e(n).data("textField");if(!o&&n.name&&(o=n.name+"_text"),o){var a='<input type="hidden" name="'+o+'"/>';e(n).parent().prepend(a),t(n,o),e(n).on("select2:select",function(){t(n,o)})}}})}),e().minicolors&&n.find(".uicolor").minicolors({control:e(this).attr("data-control")||"hue",defaultValue:e(this).attr("data-defaultValue")||"",inline:"true"===e(this).attr("data-inline"),letterCase:e(this).attr("data-letterCase")||"lowercase",opacity:e(this).attr("data-opacity"),position:e(this).attr("data-position")||"bottom left",change:function(e,t){return e?(t&&(e+=", "+t),e):""},theme:"bootstrap"}),e().bootstrapSwitch&&n.find(".uiswitch").bootstrapSwitch(),e().maxlength&&n.find(".uilength").maxlength({limitReachedClass:"label label-danger"}),e().iCheck&&n.find(".uicheck").each(function(){var t=e(this).attr("data-checkbox")?e(this).attr("data-checkbox"):"icheckbox_square-green",n=e(this).attr("data-radio")?e(this).attr("data-radio"):"iradio_square-green";t.indexOf("_line")>-1||n.indexOf("_line")>-1?e(this).iCheck({checkboxClass:t,radioClass:n,insert:'<div class="icheck_line-icon"></div>'+e(this).attr("data-label")}):e(this).iCheck({checkboxClass:t,radioClass:n})}),e().TouchSpin&&n.find(".uispin").TouchSpin(),e().datepicker&&n.find(".uidate").datepicker({todayBtn:"linked",language:"zh-CN",format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),e().timepicker&&n.find(".uitime").timepicker({defaultTime:!1}),e().datetimepicker&&n.find(".uidatetime").datetimepicker({autoclose:!0,todayBtn:"linked",todayHighlight:!0,language:"zh-CN",fontAwesome:!0}),e().clockpicker&&n.find(".uiclock").clockpicker({"default":"now",placement:"bottom",align:"left",afterShow:function(){e(".clockpicker-popover").css("z-index","10061")}}),e().menu){var i=["onShow","onHide","onClick"];n.find(".easyui-menu").each(function(){var t={},n=e(this);e.each(i,function(e,i){var o=n.data(i);o&&(t[i]=o.toFunction())}),n.menu(t)})}e().layout&&n.find(".easyui-layout").layout(),e().treegrid&&n.find(".easyui-treegrid").treegrid(),e().linkbutton&&n.find(".easyui-linkbutton").linkbutton(),e().slimScroll&&n.find(".scroller").each(function(){if(!e(this).attr("data-initialized")){var t;t=e(this).attr("data-height")?e(this).attr("data-height"):e(this).css("height"),e(this).slimScroll({allowPageScroll:!0,size:"7px",color:e(this).attr("data-handle-color")?e(this).attr("data-handle-color"):"#bbb",wrapperClass:e(this).attr("data-wrapper-class")?e(this).attr("data-wrapper-class"):"slimScrollDiv",railColor:e(this).attr("data-rail-color")?e(this).attr("data-rail-color"):"#eaeaea",position:"right",height:t,alwaysVisible:"1"==e(this).attr("data-always-visible"),railVisible:"1"==e(this).attr("data-rail-visible"),disableFadeOut:!0}),e(this).attr("data-initialized","1")}}),e().tooltip&&n.find('[data-toggle="tooltip"]').tooltip({placement:"bottom"}),n.find(".uiselectsubmit").each(function(){e(this).onSelect2Select(function(){e(this).closest("form").find(":submit").click()})}),e().fileinput&&n.find(".uifileupload").each(function(){var t={language:"zh",showCaption:!0,showRemove:!1,showUpload:!1,showPreview:!1,showClose:!1,uploadAsync:!1};e(this).fileinput(t)})}e(document).on(fx.initUIEventName,function(t){n(e(t.target))}),e(document).on("click.fx",".uiwindow",function(){return fx.window(e(this).data()),!1}),e("body").on("hidden.bs.modal",function(){e(".modal:visible").size()>0&&e("body").hasClass("modal-open")===!1&&e("body").addClass("modal-open")})}(jQuery);