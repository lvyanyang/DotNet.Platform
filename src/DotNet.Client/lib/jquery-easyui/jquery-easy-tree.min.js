!function(e){function t(t){var n=e.data(t.data.target,"draggable"),a=n.options,r=n.proxy,i=t.data,o=i.startLeft+t.pageX-i.startX,s=i.startTop+t.pageY-i.startY;r&&(r.parent()[0]==document.body?(o=null!=a.deltaX&&void 0!=a.deltaX?t.pageX+a.deltaX:t.pageX-t.data.offsetWidth,s=null!=a.deltaY&&void 0!=a.deltaY?t.pageY+a.deltaY:t.pageY-t.data.offsetHeight):(null!=a.deltaX&&void 0!=a.deltaX&&(o+=t.data.offsetWidth+a.deltaX),null!=a.deltaY&&void 0!=a.deltaY&&(s+=t.data.offsetHeight+a.deltaY))),t.data.parent!=document.body&&(o+=e(t.data.parent).scrollLeft(),s+=e(t.data.parent).scrollTop()),"h"==a.axis?i.left=o:"v"==a.axis?i.top=s:(i.left=o,i.top=s)}function n(t){var n=e.data(t.data.target,"draggable"),a=n.options,r=n.proxy;r||(r=e(t.data.target)),r.css({left:t.data.left,top:t.data.top}),e("body").css("cursor",a.cursor)}function a(a){if(!e.fn.draggable.isDragging)return!1;var r=e.data(a.data.target,"draggable"),i=r.options,o=e(".droppable").filter(function(){return a.data.target!=this}).filter(function(){var t=e.data(this,"droppable").options.accept;return!t||e(t).filter(function(){return this==a.data.target}).length>0});r.droppables=o;var s=r.proxy;return s||(i.proxy?(s="clone"==i.proxy?e(a.data.target).clone().insertAfter(a.data.target):i.proxy.call(a.data.target,a.data.target),r.proxy=s):s=e(a.data.target)),s.css("position","absolute"),t(a),n(a),i.onStartDrag.call(a.data.target,a),!1}function r(a){if(!e.fn.draggable.isDragging)return!1;var r=e.data(a.data.target,"draggable");t(a),0!=r.options.onDrag.call(a.data.target,a)&&n(a);var i=a.data.target;return r.droppables.each(function(){var t=e(this);if(!t.droppable("options").disabled){var n=t.offset();a.pageX>n.left&&a.pageX<n.left+t.outerWidth()&&a.pageY>n.top&&a.pageY<n.top+t.outerHeight()?(this.entered||(e(this).trigger("_dragenter",[i]),this.entered=!0),e(this).trigger("_dragover",[i])):this.entered&&(e(this).trigger("_dragleave",[i]),this.entered=!1)}}),!1}function i(t){function n(){s&&s.remove(),i.proxy=null}function a(){var a=!1;return i.droppables.each(function(){var r=e(this);if(!r.droppable("options").disabled){var i=r.offset();return t.pageX>i.left&&t.pageX<i.left+r.outerWidth()&&t.pageY>i.top&&t.pageY<i.top+r.outerHeight()?(d.revert&&e(t.data.target).css({position:t.data.startPosition,left:t.data.startLeft,top:t.data.startTop}),e(this).trigger("_drop",[t.data.target]),n(),a=!0,this.entered=!1,!1):void 0}}),a||d.revert||n(),a}if(!e.fn.draggable.isDragging)return o(),!1;r(t);var i=e.data(t.data.target,"draggable"),s=i.proxy,d=i.options;if(d.revert)if(1==a())e(t.data.target).css({position:t.data.startPosition,left:t.data.startLeft,top:t.data.startTop});else if(s){var l,c;s.parent()[0]==document.body?(l=t.data.startX-t.data.offsetWidth,c=t.data.startY-t.data.offsetHeight):(l=t.data.startLeft,c=t.data.startTop),s.animate({left:l,top:c},function(){n()})}else e(t.data.target).animate({left:t.data.startLeft,top:t.data.startTop},function(){e(t.data.target).css("position",t.data.startPosition)});else e(t.data.target).css({position:"absolute",left:t.data.left,top:t.data.top}),a();return d.onStopDrag.call(t.data.target,t),o(),!1}function o(){e.fn.draggable.timer&&(clearTimeout(e.fn.draggable.timer),e.fn.draggable.timer=void 0),e(document).unbind(".draggable"),e.fn.draggable.isDragging=!1,setTimeout(function(){e("body").css("cursor","")},100)}e.fn.draggable=function(t,n){return"string"==typeof t?e.fn.draggable.methods[t](this,n):this.each(function(){function n(t){var n=e.data(t.data.target,"draggable"),a=n.handle,r=e(a).offset(),i=e(a).outerWidth(),o=e(a).outerHeight(),s=t.pageY-r.top,d=r.left+i-t.pageX,l=r.top+o-t.pageY,c=t.pageX-r.left;return Math.min(s,d,l,c)>n.options.edge}var o,s=e.data(this,"draggable");s?(s.handle.unbind(".draggable"),o=e.extend(s.options,t)):o=e.extend({},e.fn.draggable.defaults,e.fn.draggable.parseOptions(this),t||{});var d=o.handle?"string"==typeof o.handle?e(o.handle,this):o.handle:e(this);return e.data(this,"draggable",{options:o,handle:d}),o.disabled?void e(this).css("cursor",""):void d.unbind(".draggable").bind("mousemove.draggable",{target:this},function(t){if(!e.fn.draggable.isDragging){var a=e.data(t.data.target,"draggable").options;n(t)?e(this).css("cursor",a.cursor):e(this).css("cursor","")}}).bind("mouseleave.draggable",{target:this},function(t){e(this).css("cursor","")}).bind("mousedown.draggable",{target:this},function(t){if(0!=n(t)){e(this).css("cursor","");var o=e(t.data.target).position(),s=e(t.data.target).offset(),d={startPosition:e(t.data.target).css("position"),startLeft:o.left,startTop:o.top,left:o.left,top:o.top,startX:t.pageX,startY:t.pageY,offsetWidth:t.pageX-s.left,offsetHeight:t.pageY-s.top,target:t.data.target,parent:e(t.data.target).parent()[0]};e.extend(t.data,d);var l=e.data(t.data.target,"draggable").options;if(0!=l.onBeforeDrag.call(t.data.target,t))return e(document).bind("mousedown.draggable",t.data,a),e(document).bind("mousemove.draggable",t.data,r),e(document).bind("mouseup.draggable",t.data,i),e.fn.draggable.timer=setTimeout(function(){e.fn.draggable.isDragging=!0,a(t)},l.delay),!1}})})},e.fn.draggable.methods={options:function(t){return e.data(t[0],"draggable").options},proxy:function(t){return e.data(t[0],"draggable").proxy},enable:function(t){return t.each(function(){e(this).draggable({disabled:!1})})},disable:function(t){return t.each(function(){e(this).draggable({disabled:!0})})}},e.fn.draggable.parseOptions=function(t){var n=e(t);return e.extend({},e.parser.parseOptions(t,["cursor","handle","axis",{revert:"boolean",deltaX:"number",deltaY:"number",edge:"number",delay:"number"}]),{disabled:!!n.attr("disabled")||void 0})},e.fn.draggable.defaults={proxy:null,revert:!1,cursor:"move",deltaX:null,deltaY:null,handle:null,disabled:!1,edge:0,axis:null,delay:100,onBeforeDrag:function(e){},onStartDrag:function(e){},onDrag:function(e){},onStopDrag:function(e){}},e.fn.draggable.isDragging=!1}(jQuery),function(e){function t(t){e(t).addClass("droppable"),e(t).bind("_dragenter",function(n,a){e.data(t,"droppable").options.onDragEnter.apply(t,[n,a])}),e(t).bind("_dragleave",function(n,a){e.data(t,"droppable").options.onDragLeave.apply(t,[n,a])}),e(t).bind("_dragover",function(n,a){e.data(t,"droppable").options.onDragOver.apply(t,[n,a])}),e(t).bind("_drop",function(n,a){e.data(t,"droppable").options.onDrop.apply(t,[n,a])})}e.fn.droppable=function(n,a){return"string"==typeof n?e.fn.droppable.methods[n](this,a):(n=n||{},this.each(function(){var a=e.data(this,"droppable");a?e.extend(a.options,n):(t(this),e.data(this,"droppable",{options:e.extend({},e.fn.droppable.defaults,e.fn.droppable.parseOptions(this),n)}))}))},e.fn.droppable.methods={options:function(t){return e.data(t[0],"droppable").options},enable:function(t){return t.each(function(){e(this).droppable({disabled:!1})})},disable:function(t){return t.each(function(){e(this).droppable({disabled:!0})})}},e.fn.droppable.parseOptions=function(t){var n=e(t);return e.extend({},e.parser.parseOptions(t,["accept"]),{disabled:!!n.attr("disabled")||void 0})},e.fn.droppable.defaults={accept:null,disabled:!1,onDragEnter:function(e,t){},onDragOver:function(e,t){},onDragLeave:function(e,t){},onDrop:function(e,t){}}}(jQuery),function($){function init(e){function t(e){var n=[];return e.addClass("menu"),n.push(e),e.hasClass("menu-content")||e.children("div").each(function(){var e=$(this).children("div");if(e.length){e.appendTo("body"),this.submenu=e;var a=t(e);n=n.concat(a)}}),n}function n(t){var n=$.parser.parseOptions(t[0],["width","height"]);t[0].originalHeight=n.height||0,t.hasClass("menu-content")?t[0].originalWidth=n.width||t._outerWidth():(t[0].originalWidth=n.width||0,t.children("div").each(function(){var t=$(this),n=$.extend({},$.parser.parseOptions(this,["name","iconCls","href",{separator:"boolean"}]),{disabled:!!t.attr("disabled")||void 0});if(n.separator&&t.addClass("menu-sep"),!t.hasClass("menu-sep")){t[0].itemName=n.name||"",t[0].itemHref=n.href||"";var a=t.addClass("menu-item").html();t.empty().append($('<div class="menu-text"></div>').html(a)),n.iconCls&&$('<div class="menu-icon"></div>').addClass(n.iconCls).appendTo(t),n.disabled&&setDisabled(e,t[0],!0),t[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(t),bindMenuItemEvent(e,t)}}),$('<div class="menu-line"></div>').prependTo(t)),setMenuSize(e,t),t.hasClass("menu-inline")||t.hide(),bindMenuEvent(e,t)}var a=$.data(e,"menu").options;$(e).addClass("menu-top"),a.inline?$(e).addClass("menu-inline"):$(e).appendTo("body"),$(e).bind("_resize",function(t,n){return($(this).hasClass("easyui-fluid")||n)&&$(e).menu("resize",e),!1});for(var r=t($(e)),i=0;i<r.length;i++)n(r[i])}function setMenuSize(e,t){var n=$.data(e,"menu").options,a=t.attr("style")||"";t.css({display:"block",left:-1e4,height:"auto",overflow:"hidden"}),t.find(".menu-item").each(function(){$(this)._outerHeight(n.itemHeight),$(this).find(".menu-text").css({height:n.itemHeight-2+"px",lineHeight:n.itemHeight-2+"px"})}),t.removeClass("menu-noline").addClass(n.noline?"menu-noline":"");var r=t[0].originalWidth||"auto";isNaN(parseInt(r))&&(r=0,t.find("div.menu-text").each(function(){r<$(this)._outerWidth()&&(r=$(this)._outerWidth())}),r+=40);var i=t.outerHeight(),o=t[0].originalHeight||"auto";if(isNaN(parseInt(o)))if(o=i,t.hasClass("menu-top")&&n.alignTo){var s=$(n.alignTo),d=s.offset().top-$(document).scrollTop(),l=$(window)._outerHeight()+$(document).scrollTop()-s.offset().top-s._outerHeight();o=Math.min(o,Math.max(d,l))}else o>$(window)._outerHeight()&&(o=$(window).height());t.attr("style",a),t._size({fit:t[0]==e&&n.fit,width:r,minWidth:n.minWidth,height:o}),t.css("overflow",t.outerHeight()<i?"auto":"hidden"),t.children("div.menu-line")._outerHeight(i-2)}function bindMenuEvent(e,t){if(!t.hasClass("menu-inline")){var n=$.data(e,"menu");t.unbind(".menu").bind("mouseenter.menu",function(){n.timer&&(clearTimeout(n.timer),n.timer=null)}).bind("mouseleave.menu",function(){n.options.hideOnUnhover&&(n.timer=setTimeout(function(){hideAll(e,$(e).hasClass("menu-inline"))},n.options.duration))})}}function bindMenuItemEvent(e,t){t.hasClass("menu-item")&&(t.unbind(".menu"),t.bind("click.menu",function(){if(!$(this).hasClass("menu-item-disabled")){if(!this.submenu){hideAll(e,$(e).hasClass("menu-inline"));var t=this.itemHref;t&&(location.href=t)}$(this).trigger("mouseenter");var n=$(e).menu("getItem",this);$.data(e,"menu").options.onClick.call(e,n)}}).bind("mouseenter.menu",function(n){if(t.siblings().each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}),t.addClass("menu-active"),$(this).hasClass("menu-item-disabled"))return void t.addClass("menu-active-disabled");var a=t[0].submenu;a&&$(e).menu("show",{menu:a,parent:t})}).bind("mouseleave.menu",function(e){t.removeClass("menu-active menu-active-disabled");var n=t[0].submenu;n?e.pageX>=parseInt(n.css("left"))?t.addClass("menu-active"):hideMenu(n):t.removeClass("menu-active")}))}function hideAll(e,t){var n=$.data(e,"menu");return n&&$(e).is(":visible")&&(hideMenu($(e)),t?$(e).show():n.options.onHide.call(e)),!1}function showMenu(e,t){function n(e,t){return e+o.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(e=t?$(t).offset().top-o._outerHeight():$(window)._outerHeight()+$(document).scrollTop()-o.outerHeight()),e<0&&(e=0),e}t=t||{};var a,r,i=$.data(e,"menu").options,o=$(t.menu||e);if($(e).menu("resize",o[0]),o.hasClass("menu-top")){if($.extend(i,t),a=i.left,r=i.top,i.alignTo){var s=$(i.alignTo);a=s.offset().left,r=s.offset().top+s._outerHeight(),"right"==i.align&&(a+=s.outerWidth()-o.outerWidth())}a+o.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&(a=$(window)._outerWidth()+$(document).scrollLeft()-o.outerWidth()-5),a<0&&(a=0),r=n(r,i.alignTo)}else{var d=t.parent;a=d.offset().left+d.outerWidth()-2,a+o.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(a=d.offset().left-o.outerWidth()+2),r=n(d.offset().top-3)}o.css(i.position.call(e,o[0],a,r)),o.show(0,function(){o[0].shadow||(o[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(o)),o[0].shadow.css({display:o.hasClass("menu-inline")?"none":"block",zIndex:$.fn.menu.defaults.zIndex++,left:o.css("left"),top:o.css("top"),width:o.outerWidth(),height:o.outerHeight()}),o.css("z-index",$.fn.menu.defaults.zIndex++),o.hasClass("menu-top")&&i.onShow.call(e)})}function hideMenu(e){function t(e){e.stop(!0,!0),e[0].shadow&&e[0].shadow.hide(),e.hide()}e&&e.length&&(t(e),e.find("div.menu-item").each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}))}function findItem(e,t){function n(i){i.children("div.menu-item").each(function(){var i=$(e).menu("getItem",this),o=r.empty().html(i.text).text();t==$.trim(o)?a=i:this.submenu&&!a&&n(this.submenu)})}var a=null,r=$("<div></div>");return n($(e)),r.remove(),a}function setDisabled(e,t,n){var a=$(t);a.hasClass("menu-item")&&(n?(a.addClass("menu-item-disabled"),t.onclick&&(t.onclick1=t.onclick,t.onclick=null)):(a.removeClass("menu-item-disabled"),t.onclick1&&(t.onclick=t.onclick1,t.onclick1=null)))}function appendItem(target,param){var opts=$.data(target,"menu").options,menu=$(target);if(param.parent){if(!param.parent.submenu){var submenu=$('<div class="menu"><div class="menu-line"></div></div>').appendTo("body");submenu.hide(),param.parent.submenu=submenu,$('<div class="menu-rightarrow"></div>').appendTo(param.parent)}menu=param.parent.submenu}if(param.separator)var item=$('<div class="menu-sep"></div>').appendTo(menu);else{var item=$('<div class="menu-item"></div>').appendTo(menu);$('<div class="menu-text"></div>').html(param.text).appendTo(item)}param.iconCls&&$('<div class="menu-icon"></div>').addClass(param.iconCls).appendTo(item),param.id&&item.attr("id",param.id),param.name&&(item[0].itemName=param.name),param.href&&(item[0].itemHref=param.href),param.onclick&&("string"==typeof param.onclick?item.attr("onclick",param.onclick):item[0].onclick=eval(param.onclick)),param.handler&&(item[0].onclick=eval(param.handler)),param.disabled&&setDisabled(target,item[0],!0),bindMenuItemEvent(target,item),bindMenuEvent(target,menu),setMenuSize(target,menu)}function removeItem(e,t){function n(e){if(e.submenu){e.submenu.children("div.menu-item").each(function(){n(this)});var t=e.submenu[0].shadow;t&&t.remove(),e.submenu.remove()}$(e).remove()}var a=$(t).parent();n(t),setMenuSize(e,a)}function setVisible(e,t,n){var a=$(t).parent();n?$(t).show():$(t).hide(),setMenuSize(e,a)}function destroyMenu(e){$(e).children("div.menu-item").each(function(){removeItem(e,this)}),e.shadow&&e.shadow.remove(),$(e).remove()}$(function(){$(document).unbind(".menu").bind("mousedown.menu",function(e){var t=$(e.target).closest("div.menu,div.combo-p");t.length||($("body>div.menu-top:visible").not(".menu-inline").menu("hide"),hideMenu($("body>div.menu:visible").not(".menu-inline")))})}),$.fn.menu=function(e,t){return"string"==typeof e?$.fn.menu.methods[e](this,t):(e=e||{},this.each(function(){var t=$.data(this,"menu");t?$.extend(t.options,e):(t=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),e)}),init(this)),$(this).css({left:t.options.left,top:t.options.top})}))},$.fn.menu.methods={options:function(e){return $.data(e[0],"menu").options},show:function(e,t){return e.each(function(){showMenu(this,t)})},hide:function(e){return e.each(function(){hideAll(this)})},destroy:function(e){return e.each(function(){destroyMenu(this)})},setText:function(e,t){return e.each(function(){$(t.target).children("div.menu-text").html(t.text)})},setIcon:function(e,t){return e.each(function(){$(t.target).children("div.menu-icon").remove(),t.iconCls&&$('<div class="menu-icon"></div>').addClass(t.iconCls).appendTo(t.target)})},getItem:function(e,t){var n=$(t),a={target:t,id:n.attr("id"),text:$.trim(n.children("div.menu-text").html()),disabled:n.hasClass("menu-item-disabled"),name:t.itemName,href:t.itemHref,onclick:t.onclick},r=n.children("div.menu-icon");if(r.length){for(var i=[],o=r.attr("class").split(" "),s=0;s<o.length;s++)"menu-icon"!=o[s]&&i.push(o[s]);a.iconCls=i.join(" ")}return a},findItem:function(e,t){return findItem(e[0],t)},appendItem:function(e,t){return e.each(function(){appendItem(this,t)})},removeItem:function(e,t){return e.each(function(){removeItem(this,t)})},enableItem:function(e,t){return e.each(function(){setDisabled(this,t,!1)})},disableItem:function(e,t){return e.each(function(){setDisabled(this,t,!0)})},showItem:function(e,t){return e.each(function(){setVisible(this,t,!0)})},hideItem:function(e,t){return e.each(function(){setVisible(this,t,!1)})},resize:function(e,t){return e.each(function(){setMenuSize(this,$(t))})}},$.fn.menu.parseOptions=function(e){return $.extend({},$.parser.parseOptions(e,[{minWidth:"number",itemHeight:"number",duration:"number",hideOnUnhover:"boolean"},{fit:"boolean",inline:"boolean",noline:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,alignTo:null,align:"left",minWidth:120,itemHeight:22,duration:100,hideOnUnhover:!0,inline:!1,fit:!1,noline:!1,position:function(e,t,n){return{left:t,top:n}},onShow:function(){},onHide:function(){},onClick:function(e){}}}(jQuery),function(e){function t(t){var n=e(t);return n.addClass("tree"),n}function n(t){var n=e.data(t,"tree").options;e(t).unbind().bind("mouseover",function(t){var n=e(t.target),a=n.closest("div.tree-node");a.length&&(a.addClass("tree-node-hover"),n.hasClass("tree-hit")&&(n.hasClass("tree-expanded")?n.addClass("tree-expanded-hover"):n.addClass("tree-collapsed-hover")),t.stopPropagation())}).bind("mouseout",function(t){var n=e(t.target),a=n.closest("div.tree-node");a.length&&(a.removeClass("tree-node-hover"),n.hasClass("tree-hit")&&(n.hasClass("tree-expanded")?n.removeClass("tree-expanded-hover"):n.removeClass("tree-collapsed-hover")),t.stopPropagation())}).bind("click",function(a){var r=e(a.target),o=r.closest("div.tree-node");if(o.length){if(r.hasClass("tree-hit"))return m(t,o[0]),!1;if(r.hasClass("tree-checkbox"))return i(t,o[0]),!1;O(t,o[0]),n.onClick.call(t,W(t,o[0])),a.stopPropagation()}}).bind("dblclick",function(a){var r=e(a.target).closest("div.tree-node");r.length&&(O(t,r[0]),n.onDblClick.call(t,W(t,r[0])),a.stopPropagation())}).bind("contextmenu",function(a){var r=e(a.target).closest("div.tree-node");r.length&&(n.onContextMenu.call(t,a,W(t,r[0])),a.stopPropagation())})}function a(t){var n=e.data(t,"tree").options;n.dnd=!1;var a=e(t).find("div.tree-node");a.draggable("disable"),a.css("cursor","pointer")}function r(t){function n(t,n){return e(t).closest("ul.tree").tree(n?"pop":"getData",t)}function a(t,n){var a=e(t).draggable("proxy").find("span.tree-dnd-icon");a.removeClass("tree-dnd-yes tree-dnd-no").addClass(n?"tree-dnd-yes":"tree-dnd-no")}function r(a,r){function i(){var i=n(a,!0);e(t).tree("append",{parent:r,data:[i]}),s.onDrop.call(t,r,i,"append")}"closed"==W(t,r).state?p(t,r,function(){i()}):i()}function i(a,r,i){var o={};"top"==i?o.before=r:o.after=r;var d=n(a,!0);o.data=d,e(t).tree("insert",o),s.onDrop.call(t,r,d,i)}var o=e.data(t,"tree"),s=o.options,d=o.tree;o.disabledNodes=[],s.dnd=!0,d.find("div.tree-node").draggable({disabled:!1,revert:!0,cursor:"pointer",proxy:function(t){var n=e('<div class="tree-node-proxy"></div>').appendTo("body");return n.html('<span class="tree-dnd-icon tree-dnd-no">&nbsp;</span>'+e(t).find(".tree-title").html()),n.hide(),n},deltaX:15,deltaY:15,onBeforeDrag:function(n){if(0==s.onBeforeDrag.call(t,W(t,this)))return!1;if(e(n.target).hasClass("tree-hit")||e(n.target).hasClass("tree-checkbox"))return!1;if(1!=n.which)return!1;var a=e(this).find("span.tree-indent");a.length&&(n.data.offsetWidth-=a.length*a.width())},onStartDrag:function(n){e(this).next("ul").find("div.tree-node").each(function(){e(this).droppable("disable"),o.disabledNodes.push(this)}),e(this).draggable("proxy").css({left:-1e4,top:-1e4}),s.onStartDrag.call(t,W(t,this));var a=W(t,this);void 0==a.id&&(a.id="easyui_tree_node_id_temp",D(t,a)),o.draggingNodeId=a.id},onDrag:function(t){var n=t.pageX,a=t.pageY,r=t.data.startX,i=t.data.startY,o=Math.sqrt((n-r)*(n-r)+(a-i)*(a-i));o>3&&e(this).draggable("proxy").show(),this.pageY=t.pageY},onStopDrag:function(){for(var n=0;n<o.disabledNodes.length;n++)e(o.disabledNodes[n]).droppable("enable");o.disabledNodes=[];var a=Y(t,o.draggingNodeId);a&&"easyui_tree_node_id_temp"==a.id&&(a.id="",D(t,a)),s.onStopDrag.call(t,a)}}).droppable({accept:"div.tree-node",onDragEnter:function(r,i){0==s.onDragEnter.call(t,this,n(i))&&(a(i,!1),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),e(this).droppable("disable"),o.disabledNodes.push(this))},onDragOver:function(r,i){if(!e(this).droppable("options").disabled){var d=i.pageY,l=e(this).offset().top,c=l+e(this).outerHeight();a(i,!0),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),d>l+(c-l)/2?c-d<5?e(this).addClass("tree-node-bottom"):e(this).addClass("tree-node-append"):d-l<5?e(this).addClass("tree-node-top"):e(this).addClass("tree-node-append"),0==s.onDragOver.call(t,this,n(i))&&(a(i,!1),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),e(this).droppable("disable"),o.disabledNodes.push(this))}},onDragLeave:function(r,i){a(i,!1),e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),s.onDragLeave.call(t,this,n(i))},onDrop:function(a,o){var d,l,c=this;return e(this).hasClass("tree-node-append")?(d=r,l="append"):(d=i,l=e(this).hasClass("tree-node-top")?"top":"bottom"),0==s.onBeforeDrop.call(t,c,n(o),l)?void e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"):(d(o,c,l),void e(this).removeClass("tree-node-append tree-node-top tree-node-bottom"))}})}function i(t,n,a,r){var i=e.data(t,"tree"),l=i.options;if(l.checkbox){var c=W(t,n);if(c.checkState){var u=e(n).find(".tree-checkbox");if(void 0==a&&(u.hasClass("tree-checkbox1")?a=!1:u.hasClass("tree-checkbox0")?a=!0:(void 0==c._checked&&(c._checked=e(n).find(".tree-checkbox").hasClass("tree-checkbox1")),a=!c._checked)),c._checked=a,a){if(u.hasClass("tree-checkbox1"))return}else if(u.hasClass("tree-checkbox0"))return;(r||0!=l.onBeforeCheck.call(t,c,a))&&(l.cascadeCheck?(o(t,c,a),d(t,c)):s(t,c,a?"1":"0"),r||l.onCheck.call(t,c,a))}}}function o(t,n,a){var r=e.data(t,"tree").options,i=a?1:0;if(s(t,n,i),r.deepCheck)e.easyui.forEach(n.children||[],!0,function(e){s(t,e,i)});else{var o=[];n.children&&n.children.length&&o.push(n),e.easyui.forEach(n.children||[],!0,function(e){e.hidden||(s(t,e,i),e.children&&e.children.length&&o.push(e))});for(var d=o.length-1;d>=0;d--){var c=o[d];s(t,c,l(c))}}}function s(t,n,a){var r=e.data(t,"tree").options;if(n.checkState&&void 0!=a&&(!n.hidden||r.deepCheck)){var i=e("#"+n.domId).find(".tree-checkbox");n.checkState=["unchecked","checked","indeterminate"][a],n.checked="checked"==n.checkState,i.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),i.addClass("tree-checkbox"+a)}}function d(t,n){var a=S(t,e("#"+n.domId)[0]);a&&(s(t,a,l(a)),d(t,a))}function l(t){var n=0,a=0,r=0;if(e.easyui.forEach(t.children||[],!1,function(e){e.checkState&&(r++,"checked"==e.checkState?a++:"unchecked"==e.checkState&&n++)}),0!=r){var i=0;return i=n==r?0:a==r?1:2}}function c(t,n){var a=e.data(t,"tree").options;if(a.checkbox){var r=e(n),o=r.find(".tree-checkbox"),s=W(t,n);if(a.view.hasCheckbox(t,s))if(o.length||(s.checkState=s.checkState||"unchecked",e('<span class="tree-checkbox"></span>').insertBefore(r.find(".tree-title"))),"checked"==s.checkState)i(t,n,!0,!0);else if("unchecked"==s.checkState)i(t,n,!1,!0);else{var c=l(s);0===c?i(t,n,!1,!0):1===c&&i(t,n,!0,!0)}else o.remove(),s.checkState=void 0,s.checked=void 0,d(t,s)}}function u(t,n,a,o,s){var d=e.data(t,"tree"),l=d.options,c=e(n).prevAll("div.tree-node:first");a=l.loadFilter.call(t,a,c[0]);var u=M(t,"domId",c.attr("id"));o?u?u.children?u.children=u.children.concat(a):u.children=a:d.data=d.data.concat(a):(u?u.children=a:d.data=a,e(n).empty()),l.view.render.call(l.view,t,n,a),l.dnd&&r(t),u&&D(t,u);for(var f=0;f<d.tmpIds.length;f++)i(t,e("#"+d.tmpIds[f])[0],!0,!0);d.tmpIds=[],setTimeout(function(){h(t,t)},0),s||l.onLoadSuccess.call(t,u,a)}function h(t,n,a){function r(e,t){var n=e.find("span.tree-icon");n.prev("span.tree-indent").addClass("tree-join")}function i(t){var n=t.find("span.tree-indent, span.tree-hit").length;t.next().find("div.tree-node").each(function(){e(this).children("span:eq("+(n-1)+")").addClass("tree-line")})}var o=e.data(t,"tree").options;if(!o.lines)return void e(t).removeClass("tree-lines");if(e(t).addClass("tree-lines"),!a){a=!0,e(t).find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),e(t).find("div.tree-node").removeClass("tree-node-last tree-root-first tree-root-one");var s=e(t).tree("getRoots");s.length>1?e(s[0].target).addClass("tree-root-first"):1==s.length&&e(s[0].target).addClass("tree-root-one")}e(n).children("li").each(function(){var n=e(this).children("div.tree-node"),o=n.next("ul");o.length?(e(this).next().length&&i(n),h(t,o,a)):r(n)});var d=e(n).children("li:last").children("div.tree-node").addClass("tree-node-last");d.children("span.tree-join").removeClass("tree-join").addClass("tree-joinbottom")}function f(t,n,a,r){var i=e.data(t,"tree").options;a=e.extend({},i.queryParams,a||{});var o=null;if(t!=n){var s=e(n).prev();o=W(t,s[0])}if(0!=i.onBeforeLoad.call(t,o,a)){var d=e(n).prev().children("span.tree-folder");d.addClass("tree-loading");var l=i.loader.call(t,a,function(e){d.removeClass("tree-loading"),u(t,n,e),r&&r()},function(){d.removeClass("tree-loading"),i.onLoadError.apply(t,arguments),r&&r()});0==l&&d.removeClass("tree-loading")}}function p(t,n,a){var r=e.data(t,"tree").options,i=e(n).children("span.tree-hit");if(0!=i.length&&!i.hasClass("tree-expanded")){var o=W(t,n);if(0!=r.onBeforeExpand.call(t,o)){i.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),i.next().addClass("tree-folder-open");var s=e(n).next();if(s.length)r.animate?s.slideDown("normal",function(){o.state="open",r.onExpand.call(t,o),a&&a()}):(s.css("display","block"),o.state="open",r.onExpand.call(t,o),a&&a());else{var d=e('<ul style="display:none"></ul>').insertAfter(n);f(t,d[0],{id:o.id},function(){d.is(":empty")&&d.remove(),r.animate?d.slideDown("normal",function(){o.state="open",r.onExpand.call(t,o),a&&a()}):(d.css("display","block"),o.state="open",r.onExpand.call(t,o),a&&a())})}}}}function g(t,n){var a=e.data(t,"tree").options,r=e(n).children("span.tree-hit");if(0!=r.length&&!r.hasClass("tree-collapsed")){var i=W(t,n);if(0!=a.onBeforeCollapse.call(t,i)){r.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),r.next().removeClass("tree-folder-open");var o=e(n).next();a.animate?o.slideUp("normal",function(){i.state="closed",a.onCollapse.call(t,i)}):(o.css("display","none"),i.state="closed",a.onCollapse.call(t,i))}}}function m(t,n){var a=e(n).children("span.tree-hit");0!=a.length&&(a.hasClass("tree-expanded")?g(t,n):p(t,n))}function v(e,t){var n=T(e,t);t&&n.unshift(W(e,t));for(var a=0;a<n.length;a++)p(e,n[a].target)}function b(e,t){for(var n=[],a=S(e,t);a;)n.unshift(a),a=S(e,a.target);for(var r=0;r<n.length;r++)p(e,n[r].target)}function C(t,n){for(var a=e(t).parent();"BODY"!=a[0].tagName&&"auto"!=a.css("overflow-y");)a=a.parent();var r=e(n),i=r.offset().top;if("BODY"!=a[0].tagName){var o=a.offset().top;i<o?a.scrollTop(a.scrollTop()+i-o):i+r.outerHeight()>o+a.outerHeight()-18&&a.scrollTop(a.scrollTop()+i+r.outerHeight()-o-a.outerHeight()+18)}else a.scrollTop(i)}function x(e,t){var n=T(e,t);t&&n.unshift(W(e,t));for(var a=0;a<n.length;a++)g(e,n[a].target)}function k(t,n){var a=e(n.parent),r=n.data;if(r&&(r=e.isArray(r)?r:[r],r.length)){var i;if(0==a.length)i=e(t);else{if(X(t,a[0])){var o=a.find("span.tree-icon");o.removeClass("tree-file").addClass("tree-folder tree-folder-open");var s=e('<span class="tree-hit tree-expanded"></span>').insertBefore(o);s.prev().length&&s.prev().remove()}i=a.next(),i.length||(i=e("<ul></ul>").insertAfter(a))}u(t,i[0],r,!0,!0)}}function $(t,n){var a=n.before||n.after,r=S(t,a),i=n.data;if(i&&(i=e.isArray(i)?i:[i],i.length)){k(t,{parent:r?r.target:null,data:i});for(var o=r?r.children:e(t).tree("getRoots"),s=0;s<o.length;s++)if(o[s].domId==e(a).attr("id")){for(var d=i.length-1;d>=0;d--)o.splice(n.before?s:s+1,0,i[d]);o.splice(o.length-i.length,i.length);break}for(var l=e(),s=0;s<i.length;s++)l=l.add(e("#"+i[s].domId).parent());n.before?l.insertBefore(e(a).parent()):l.insertAfter(e(a).parent())}}function y(t,n){function a(n){for(var a=e(n).attr("id"),r=S(t,n),i=r?r.children:e.data(t,"tree").data,o=0;o<i.length;o++)if(i[o].domId==a){i.splice(o,1);break}return r}var r=a(n);if(e(n).parent().remove(),r){if(!r.children||!r.children.length){var i=e(r.target);i.find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),i.find(".tree-hit").remove(),e('<span class="tree-indent"></span>').prependTo(i),i.next().remove()}D(t,r)}h(t,t)}function D(t,n){var a=e.data(t,"tree").options,r=e(n.target),i=W(t,n.target);i.iconCls&&r.find(".tree-icon").removeClass(i.iconCls),e.extend(i,n),r.find(".tree-title").html(a.formatter.call(t,i)),i.iconCls&&r.find(".tree-icon").addClass(i.iconCls),c(t,n.target)}function w(e,t){if(t){for(var n=S(e,t);n;)t=n.target,n=S(e,t);return W(e,t)}var a=I(e);return a.length?a[0]:null}function I(t){for(var n=e.data(t,"tree").data,a=0;a<n.length;a++)L(n[a]);return n}function T(t,n){var a=[],r=W(t,n),i=r?r.children||[]:e.data(t,"tree").data;return e.easyui.forEach(i,!0,function(e){a.push(L(e))}),a}function S(t,n){var a=e(n).closest("ul").prevAll("div.tree-node:first");return W(t,a[0])}function _(t,n){n=n||"checked",e.isArray(n)||(n=[n]);var a=[];return e.easyui.forEach(e.data(t,"tree").data,!0,function(t){t.checkState&&e.easyui.indexOfArray(n,t.checkState)!=-1&&a.push(L(t))}),a}function H(t){var n=e(t).find("div.tree-node-selected");return n.length?W(t,n[0]):null}function E(t,n){var a=W(t,n);return a&&a.children&&e.easyui.forEach(a.children,!0,function(e){L(e)}),a}function W(t,n){return M(t,"domId",e(n).attr("id"))}function Y(e,t){return M(e,"id",t)}function M(t,n,a){var r=e.data(t,"tree").data,i=null;return e.easyui.forEach(r,!0,function(e){if(e[n]==a)return i=L(e),!1}),i}function L(t){return t.target=e("#"+t.domId)[0],t}function O(t,n){var a=e.data(t,"tree").options,r=W(t,n);0!=a.onBeforeSelect.call(t,r)&&(e(t).find("div.tree-node-selected").removeClass("tree-node-selected"),e(n).addClass("tree-node-selected"),a.onSelect.call(t,r))}function X(t,n){return 0==e(n).children("span.tree-hit").length}function B(t,n){var a=e.data(t,"tree").options,r=W(t,n);if(0!=a.onBeforeEdit.call(t,r)){e(n).css("position","relative");var i=e(n).find(".tree-title"),o=i.outerWidth();i.empty();var s=e('<input class="tree-editor">').appendTo(i);s.val(r.text).focus(),s.width(o+20),s._outerHeight(18),s.bind("click",function(e){return!1}).bind("mousedown",function(e){e.stopPropagation()}).bind("mousemove",function(e){e.stopPropagation()}).bind("keydown",function(e){return 13==e.keyCode?(A(t,n),!1):27==e.keyCode?(N(t,n),!1):void 0}).bind("blur",function(e){e.stopPropagation(),A(t,n)})}}function A(t,n){var a=e.data(t,"tree").options;e(n).css("position","");var r=e(n).find("input.tree-editor"),i=r.val();r.remove();var o=W(t,n);o.text=i,D(t,o),a.onAfterEdit.call(t,o)}function N(t,n){var a=e.data(t,"tree").options;e(n).css("position",""),e(n).find("input.tree-editor").remove();var r=W(t,n);D(t,r),a.onCancelEdit.call(t,r)}function P(t,n){function a(n){for(var a=e(t).tree("getParent",e("#"+n)[0]);a;)e(a.target).removeClass("tree-node-hidden"),a.hidden=!1,a=e(t).tree("getParent",a.target)}var r=e.data(t,"tree"),i=r.options,o={};e.easyui.forEach(r.data,!0,function(a){i.filter.call(t,n,a)?(e("#"+a.domId).removeClass("tree-node-hidden"),o[a.domId]=1,a.hidden=!1):(e("#"+a.domId).addClass("tree-node-hidden"),a.hidden=!0)});for(var s in o)a(s)}e.fn.tree=function(a,r){if("string"==typeof a)return e.fn.tree.methods[a](this,r);var a=a||{};return this.each(function(){var r,i=e.data(this,"tree");if(i)r=e.extend(i.options,a),i.options=r;else{r=e.extend({},e.fn.tree.defaults,e.fn.tree.parseOptions(this),a),
e.data(this,"tree",{options:r,tree:t(this),data:[],tmpIds:[]});var o=e.fn.tree.parseData(this);o.length&&u(this,this,o)}n(this),r.data&&u(this,this,e.extend(!0,[],r.data)),f(this,this)})},e.fn.tree.methods={options:function(t){return e.data(t[0],"tree").options},loadData:function(e,t){return e.each(function(){u(this,this,t)})},getNode:function(e,t){return W(e[0],t)},getData:function(e,t){return E(e[0],t)},reload:function(t,n){return t.each(function(){if(n){var t=e(n),a=t.children("span.tree-hit");a.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),t.next().remove(),p(this,n)}else e(this).empty(),f(this,this)})},getRoot:function(e,t){return w(e[0],t)},getRoots:function(e){return I(e[0])},getParent:function(e,t){return S(e[0],t)},getChildren:function(e,t){return T(e[0],t)},getChecked:function(e,t){return _(e[0],t)},getSelected:function(e){return H(e[0])},isLeaf:function(e,t){return X(e[0],t)},find:function(e,t){return Y(e[0],t)},select:function(e,t){return e.each(function(){O(this,t)})},check:function(e,t){return e.each(function(){i(this,t,!0)})},uncheck:function(e,t){return e.each(function(){i(this,t,!1)})},collapse:function(e,t){return e.each(function(){g(this,t)})},expand:function(e,t){return e.each(function(){p(this,t)})},collapseAll:function(e,t){return e.each(function(){x(this,t)})},expandAll:function(e,t){return e.each(function(){v(this,t)})},expandTo:function(e,t){return e.each(function(){b(this,t)})},scrollTo:function(e,t){return e.each(function(){C(this,t)})},toggle:function(e,t){return e.each(function(){m(this,t)})},append:function(e,t){return e.each(function(){k(this,t)})},insert:function(e,t){return e.each(function(){$(this,t)})},remove:function(e,t){return e.each(function(){y(this,t)})},pop:function(e,t){var n=e.tree("getData",t);return e.tree("remove",t),n},update:function(t,n){return t.each(function(){D(this,e.extend({},n,{checkState:n.checked?"checked":n.checked===!1?"unchecked":void 0}))})},enableDnd:function(e){return e.each(function(){r(this)})},disableDnd:function(e){return e.each(function(){a(this)})},beginEdit:function(e,t){return e.each(function(){B(this,t)})},endEdit:function(e,t){return e.each(function(){A(this,t)})},cancelEdit:function(e,t){return e.each(function(){N(this,t)})},doFilter:function(e,t){return e.each(function(){P(this,t)})}},e.fn.tree.parseOptions=function(t){e(t);return e.extend({},e.parser.parseOptions(t,["url","method",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean",lines:"boolean",dnd:"boolean"}]))},e.fn.tree.parseData=function(t){function n(t,a){a.children("li").each(function(){var a=e(this),r=e.extend({},e.parser.parseOptions(this,["id","iconCls","state"]),{checked:!!a.attr("checked")||void 0});r.text=a.children("span").html(),r.text||(r.text=a.html());var i=a.children("ul");i.length&&(r.children=[],n(r.children,i)),t.push(r)})}var a=[];return n(a,e(t)),a};var z=1,j={render:function(t,n,a){function r(n,a){for(var s=[],l=0;l<a.length;l++){var c=a[l];"open"!=c.state&&"closed"!=c.state&&(c.state="open"),c.domId="_easyui_tree_"+z++,s.push("<li>"),s.push('<div id="'+c.domId+'" class="tree-node">');for(var u=0;u<n;u++)s.push('<span class="tree-indent"></span>');if("closed"==c.state?(s.push('<span class="tree-hit tree-collapsed"></span>'),s.push('<span class="tree-icon tree-folder '+(c.iconCls?c.iconCls:"")+'"></span>')):c.children&&c.children.length?(s.push('<span class="tree-hit tree-expanded"></span>'),s.push('<span class="tree-icon tree-folder tree-folder-open '+(c.iconCls?c.iconCls:"")+'"></span>')):(s.push('<span class="tree-indent"></span>'),s.push('<span class="tree-icon tree-file '+(c.iconCls?c.iconCls:"")+'"></span>')),this.hasCheckbox(t,c)){var h=0;d&&"checked"==d.checkState&&o.cascadeCheck?(h=1,c.checked=!0):c.checked&&e.easyui.addArrayItem(i.tmpIds,c.domId),c.checkState=h?"checked":"unchecked",s.push('<span class="tree-checkbox tree-checkbox'+h+'"></span>')}else c.checkState=void 0,c.checked=void 0;if(s.push('<span class="tree-title">'+o.formatter.call(t,c)+"</span>"),s.push("</div>"),c.children&&c.children.length){var f=r.call(this,n+1,c.children);s.push('<ul style="display:'+("closed"==c.state?"none":"block")+'">'),s=s.concat(f),s.push("</ul>")}s.push("</li>")}return s}var i=e.data(t,"tree"),o=i.options,s=e(n).prev(".tree-node"),d=s.length?e(t).tree("getNode",s[0]):null,l=s.find("span.tree-indent, span.tree-hit").length,c=r.call(this,l,a);e(n).append(c.join(""))},hasCheckbox:function(t,n){var a=e.data(t,"tree"),r=a.options;if(r.checkbox){if(e.isFunction(r.checkbox))return!!r.checkbox.call(t,n);if(!r.onlyLeafCheck)return!0;if(!("open"!=n.state||n.children&&n.children.length))return!0}return!1}};e.fn.tree.defaults={url:null,method:"post",animate:!1,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,dnd:!1,data:null,queryParams:{},formatter:function(e){return e.text},filter:function(t,n){var a=[];e.map(e.isArray(t)?t:[t],function(t){t=e.trim(t),t&&a.push(t)});for(var r=0;r<a.length;r++){var i=n.text.toLowerCase().indexOf(a[r].toLowerCase());if(i>=0)return!0}return!a.length},loader:function(t,n,a){var r=e(this).tree("options");return!!r.url&&void e.ajax({type:r.method,url:r.url,data:t,dataType:"json",success:function(e){n(e)},error:function(){a.apply(this,arguments)}})},loadFilter:function(e,t){return e},view:j,onBeforeLoad:function(e,t){},onLoadSuccess:function(e,t){},onLoadError:function(){},onClick:function(e){},onDblClick:function(e){},onBeforeExpand:function(e){},onExpand:function(e){},onBeforeCollapse:function(e){},onCollapse:function(e){},onBeforeCheck:function(e,t){},onCheck:function(e,t){},onBeforeSelect:function(e){},onSelect:function(e){},onContextMenu:function(e,t){},onBeforeDrag:function(e){},onStartDrag:function(e){},onStopDrag:function(e){},onDragEnter:function(e,t){},onDragOver:function(e,t){},onDragLeave:function(e,t){},onBeforeDrop:function(e,t,n){},onDrop:function(e,t,n){},onBeforeEdit:function(e){},onAfterEdit:function(e){},onCancelEdit:function(e){}}}(jQuery);