var fx={};!function(e,t){"use strict";var n=[],a=!1,o=e.Deferred(),i=/<body[^>]*>([\s\S]*)<\/body>/,s=[],r=function(t){if(n[t])return n[t].promise();var a=e.Deferred(),o=document.createElement("script");return o.src=t,o.onload=function(e){a.resolve(e)},o.onerror=function(e){a.reject(e)},document.body.appendChild(o),n[t]=a,a.promise()},l=function(t){if(n[t])return n[t].promise();var a=e.Deferred(),o=document.createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=t,o.onload=function(e){a.resolve(e)},o.onerror=function(e){a.reject(e)},document.head.appendChild(o),n[t]=a,a.promise()},d=function(t){return t=e.isArray(t)?t:t.split(/\s+/),a||(a=o.promise()),e.each(t,function(e,t){a=a.then(function(){return t.indexOf(".css")>=0?l(t):r(t)})}),o.resolve(),a};e.extend(t,{module:".home-main",initUIEventName:"init.fx.ui",beforeInitUIEventName:"before.fx.ui",afterInitUIEventName:"after.fx.ui",destroyModuleEventName:"destroy.fx.module",keyCode:{enter:13,esc:27,end:35,home:36,shift:16,ctrl:17,tab:9,left:37,right:39,up:38,down:40,"delete":46,backspace:8},statusCode:{ok:200,error:300,timeout:301},onReady:function(t,n){var a=this;"function"==typeof t?(n=t,t=null):s=t,e(a.module).on(a.afterInitUIEventName,n)},onModuleDestroy:function(t){e(this.module).on(this.destroyModuleEventName,t)},loadPage:function(n){var a=n.id,o=n.text,i=n.url,r=n.iconCls;i&&(this.setCurrentPanelId(a),e(t.module).trigger(t.destroyModuleEventName),e(t.module).off(t.destroyModuleEventName),e(t.module).off(t.afterInitUIEventName),e(t.module).panel({id:a,title:o,iconCls:r,href:i,onLoadError:function(n){var a=this;try{var o=e.parseJSON(n.responseText);o&&e(a).showDanger(o.message+"  "+n.statusText+"("+n.status+")")}catch(i){t.loadResource(s,function(){e(a).append(n.responseText).initUI()})}},onLoad:function(){var n=this;t.loadResource(s,function(){e(n).initUI()})}}))},setCurrentPanelId:function(t){null===t?e.sessionStorage.remove("currentPanelId"):e.sessionStorage.set("currentPanelId",t)},getCurrentPanelId:function(){return e.sessionStorage.get("currentPanelId")},getScreenResolution:function(){return window.screen.width+"×"+window.screen.height},getOS:function(){var e=new userAgent(navigator.userAgent);return e.os.name+" "+e.os.version.original},getBrowser:function(){var e=new userAgent(navigator.userAgent);return e.browser.name+" "+(e.browser.version.major||e.browser.version.original)},getDevice:function(){var e=new userAgent(navigator.userAgent);return"mobile"==e.device.type.toLowerCase()?e.device.model.toLowerCase():"pc"},serializeForm:function(t){var n={},a=t.serializeArray();return e.each(a,function(){void 0!==n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),t.find("input[type=checkbox]").each(function(){var t=e(this).attr("name"),a=e(this).attr("value");n[t]=a}),n},convertOptionToObj:function(e,t){for(var n=0;n<t.length;n++){var a=t[n],o=e.data(a);void 0!==o&&"string"==typeof o&&e.data(a,o.toObject())}},getOptionToObj:function(e,t){var n=e.data(t);if(void 0!==n&&"string"==typeof n)return n.toObject()},convertOptionToFunc:function(e,t){for(var n=0;n<t.length;n++){var a=t[n],o=e.data(a);void 0!==o&&"string"==typeof o&&e.data(a,o.toFunction())}},getOptionToFunc:function(e,t){var n=e.data(t);if(void 0!==n&&"string"==typeof n)return n.toFunction()},convertOptionToEvent:function(t){var n=t.data();e.each(n,function(e){if(e.indexOf("on")>-1){var n=t.data(e);void 0!==n&&"string"==typeof n&&t.data(e,n.toFunction())}})},loadResource:function(e,t){d(e).then(t)},uuid:function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toLowerCase()}}(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}),getBodyString:function(e){var t=i.exec(e);return t&&2===t.length?t[1]:e},getRandomNumber:function(e){return Math.floor(Math.random()*e+1)},closeChrome:function(){var e=navigator.appName;"Netscape"===e?(window.open("","_self",""),void 0!=window.opener?window.opener.returnValue="1":window.returnValue="1",window.close()):window.close()},fixLenString:function(e,t,n){for(var a=e,o=t-a.length,i=1;i<=o;i++)a=n+a;return a},mask:function(t){t||(t={}),0!=t.masked&&(t.mask||(t.mask="正在提交请求,请稍等..."),t.maskTarget?e(t.maskTarget).mask(t.mask,t.delay):e("body").mask(t.mask,t.delay))},unmask:function(t){t||(t={}),0!=t.masked&&(t.maskTarget?e(t.maskTarget).unmask():e("body").unmask())},ajax:function(n){if(!n.url)return void t.alert("请指定提交Url");var a=e.extend({url:n.url,type:"post",cache:!1,beforeSend:function(){t.mask(a)},complete:function(){t.unmask(a)},error:function(e){t.ajaxFailAlert(e)},success:function(e){"json"==this.dataTypes[1]&&e.message?t.alert(e.message):"html"==this.dataTypes[1]&&alert(e)}},n);n.confirm?t.confirm(n.confirm,function(t){layer.close(t),e.ajax(a)}):e.ajax(a)},window:function(n){n.mask||(n.mask="正在加载,请稍等...");var a=function(e){var t="";"sm"==n.size?t="modal-sm":"lg"==n.size?t="modal-lg":"full"==n.size?t="modal-full":"big"==n.size&&(t="modal-big");var a='<div class="modal fade" aria-hidden="true" role="dialog" data-backdrop="true">   <div class="modal-dialog '+t+'">       <div class="modal-content">';return n.title&&(a+='           <div class="modal-header">               <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>               <h4 class="modal-title"> '+n.title+" </h4>           </div>"),a+='           <div class="modal-body">'+e+'</div>           <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-sign-in"></i> 关闭</button></div>       </div>   </div></div>'},o=function(o){var i=e('<div class="uiwindow-container"></div>');e(o).is(".modal")||(o=a(o)),i.html(o);var s=i.find(".modal");i.appendTo("body"),s.on("hidden.bs.modal",function(){s.triggerHandler("hide"),n.hide&&n.hide.call(s),e().datetimepicker&&s.find(".uidatetime").datetimepicker("remove"),i.remove()}),s.onAfterInitUI(function(){s.triggerHandler("show"),t.unmask(n),n.show&&n.show.call(s)}),s.initUI(),s.modal("show")};if(n.content)o("object"==typeof n.content&&n.content.length>0?n.content.html():n.content);else{if(!n.url){var i="请指定提交Url";return console.error(i),void t.alert(i)}e.ajax({url:n.url,data:n.data,type:n.type||"get",cache:n.cache||!1,dataType:n.dataType||"html",beforeSend:function(){t.mask(n)},complete:function(){},error:function(e){t.unmask(n),t.ajaxFailAlert(e)},success:o})}},serverResult:function(t){var n='<div class="uiwindow-container"><div class="modal fade" aria-hidden="true" role="dialog" data-backdrop="true">   <div class="modal-dialog modal-lg">       <div class="modal-content">           <div class="modal-header">               <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>               <h4 class="modal-title"> 应用程序执行结果 </h4>           </div>           <div class="modal-body"></div>           <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-sign-in"></i> 关闭</button></div>       </div>   </div></div></div>',a=e(n).appendTo("body"),o=a.find(".modal"),i=o.find(".modal-body");o.on("hidden.bs.modal",function(){a.remove()});var s=[],r=[];e.each(t,function(e,t){1==t.success?s.push(t):r.push(t)}),i.append("<h4>共操作 {0} 项，成功 {1} 项，失败 {2} 项</h4>".format(t.length,s.length,r.length)),i.append('<ul class="list-group">'),e.each(s,function(e,t){t.message&&i.append('<li class="list-group-item color-success">'+t.message+"</li>")}),e.each(r,function(e,t){t.message&&i.append('<li class="list-group-item color-danger">'+t.message+"</li>")}),i.append("</ul>"),o.modal("show")},alert:function(t,n,a){var o={title:"系统提示",icon:0},i=e.extend({},o,a);layer.alert(t,i,n)},confirm:function(t,n,a){var o={title:"系统提示",icon:3},i=e.extend({},o,a);layer.confirm(t,i,n)},msg:function(e,t){layer.msg(e,t)},prompt:function(t,n,a){var o={title:t},i=e.extend({},o,a);layer.prompt(i,n)},monitorPanelWidth:function(t,n,a){var o=t+"Status_"+a,i=n.layout("panel",a),s=0;if(e.localStorage.isSet(t)&&(i.panel("resize",{width:e.localStorage.get(t)}),n.layout("resize")),e.localStorage.isSet(o)){var r=e.localStorage.get(o);1==r?setTimeout(function(){n.layout("expand",a)},1):0==r&&setTimeout(function(){n.layout("collapse",a)},1)}n.layout({onCollapse:function(){e.localStorage.set(o,!1)},onExpand:function(){e.localStorage.set(o,!0)}}),i.panel({onResize:function(n,a){s!=n&&(e.localStorage.set(t,n),s=n)}})},ajaxFail:function(e,n){e.responseJSON?n.showDanger(e.responseJSON.message):n.showDanger(t.getBodyString(e.responseText))},ajaxFailAlert:function(n){if(n.responseJSON)t.alert(n.responseJSON.message,null,{title:n.statusText+"("+n.status+")"});else try{var a=e.parseJSON(n.responseText);a&&t.alert(a.message,null,{title:n.statusText+"("+n.status+")"})}catch(o){layer.open({type:1,skin:"layui-layer-rim",area:[e(window).width()/3*2+"px",e(window).height()-100+"px"],title:!1,content:t.getBodyString(n.responseText)})}},maSuccess:function(n){var a=e(this).getFormModal();if(n.success)a.uimodal().close(),n.message&&t.alert(n.message);else{var o=e(this).data("errorEl");if(o){var i=e(e(this).uiform().options.container);i.find(o).html(n.message).show()}else t.alert(n.message)}},mtfSuccess:function(n){var a=e(this).data("table");if(!a)return void t.alert("请指定data-table属性");var o=e(this).getFormModal();if(n.success)o.uimodal().close(),e(a).uitable().reload();else{var i=e(this).data("errorEl");if(i){var s=e(e(this).uiform().options.container);s.find(i).html(n.message).show()}else t.alert(n.message)}},mtftSuccess:function(n){var a=e(this).data("tree");if(!a)return void t.alert("请指定data-tree属性");var o=e(this).getFormModal();if(n.success)o.uimodal().close(),e(a).uitree().reload();else{var i=e(this).data("errorEl");if(i){var s=e(e(this).uiform().options.container);s.find(i).html(n.message).show()}else t.alert(n.message)}},boolColumnFormatter:function(e){var t=e?"checkok":"checkno";return'<div class="'+t+'"><div>'}}),t.loadMask={defaults:{loadMask:!0,loadMaskTarget:null,loadMaskMessage:"正在加载,请稍等...",loadMaskDelay:200},show:function(n){0!=n.loadMask&&(n.loadMaskTarget||(n.loadMaskTarget=t.module),e(n.loadMaskTarget).mask(n.loadMaskMessage,n.loadMaskDelay))},hide:function(t){0!=t.loadMask&&t.loadMaskTarget&&e(t.loadMaskTarget).unmask()}},e.fn.extend({animateCss:function(t,n){var a="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";e(this).addClass("animated "+t).one(a,function(){e(this).removeClass("animated "+t),n&&n.call(this)})},isTag:function(t){return!!t&&(!!e(this).prop("tagName")&&e(this)[0].tagName.toLowerCase()==t.toLowerCase())},isBind:function(t){var n=e(this).data("events");return n&&t&&n[t]},initUI:function(){function n(n){e.when(n.triggerHandler(t.beforeInitUIEventName)).done(function(){n.trigger(t.initUIEventName)})}function a(a){e.when(n(a)).done(function(){a.triggerHandler(t.afterInitUIEventName)})}return this.each(function(){a(e(this))})},getFormModal:function(){return e(this).closest(".uimodal-container")},getModalContent:function(){return e(this).find(".modal-content")},onAfterInitUI:function(n){e(this).on(t.afterInitUIEventName,n)},onSelect2Select:function(t){e(this).on("select2:select",t)},showSuccess:function(t){var n='<div class="alert alert-success alert-dismissible">';n+='<strong><i class="fa-lg fa fa-check-circle"></i> '+t+"</strong>",n+="</div>",e(this).append(n)},showInfo:function(t){var n='<div class="alert alert-info alert-dismissible">';n+='<strong><i class="fa-lg fa fa-info-circle"></i> '+t+"</strong>",n+="</div>",e(this).append(n)},showWarning:function(t){var n='<div class="alert alert-warning alert-dismissible">';n+='<strong><i class="fa-lg fa fa-warning"></i> '+t+"</strong>",n+="</div>",e(this).append(n)},showDanger:function(t){var n='<div class="alert alert-danger alert-dismissible">';n+="<strong>"+t+"</strong>",n+="</div>",e(this).append(n)}})}(jQuery,fx);